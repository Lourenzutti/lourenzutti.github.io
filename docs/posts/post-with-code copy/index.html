<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Module 6: Simulation-based hypothesis testing – Rodolfo Lourenzutti</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-79108a0fc1995748cbd19a5b0e3e3e7c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="../../site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<meta name="quarto:status" content="draft">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner"><div id="quarto-draft-alert" class="alert alert-warning"><i class="bi bi-pencil-square"></i>Draft</div>
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Rodolfo Lourenzutti</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Module 6: Simulation-based hypothesis testing</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="learning-objectives" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="learning-objectives">Learning objectives</h2>
<ul>
<li><p>Give an example of a question you could answer with a hypothesis test.</p></li>
<li><p>Differentiate composite vs.&nbsp;simple hypotheses.</p></li>
<li><p>Given an inferential question, formulate null and alternative hypotheses to be used in a hypothesis test.</p></li>
<li><p>Identify the steps and components of a basic hypothesis test (“there is only one hypothesis test”).</p></li>
<li><p>Write computer scripts to perform hypothesis testing via simulation, randomization and bootstrapping approaches, as well as interpret the output.</p></li>
<li><p>Describe the relationship between confidence intervals and hypothesis testing.</p></li>
<li><p>Discuss the potential limitations of this simulation approach to hypothesis testing.</p></li>
</ul>
</section>
<section id="introduction" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="introduction">Introduction</h2>
<p>So far in the course, we have focused our attention on estimation, where we are interested in unknown parameters of a specific population. Our objective was to estimate these unknown parameters as accurately as possible. We discussed two types of estimators:</p>
<ul>
<li><p>Point estimators: just a number we calculate from our sample (i.e., a statistic).</p></li>
<li><p>Interval estimators: a range of plausible values for a parameter which accounts for the uncertainty associated with the estimation process (i.e., confidence intervals).</p></li>
</ul>
<p>However, in many situations, we are not mainly interested in the precise value of the parameter. Instead, we need to assess specific claims or assumptions about the population, which can lead to different conclusions or decisions. To better understand this, let us consider the Vancouver Beaches problems introduced in the example below.</p>
<div id="exm-vancouver-beach" class="theorem example">
<p><span class="theorem-title"><strong>Example 1</strong></span> During the summer, Vancouver’s beaches get pretty busy. To ensure everybody’s safety, the city of Vancouver monitors if the beaches’ waters are safe for swimming. If the average number of E. coli per <span class="math inline">\(100\)</span>mL is <span class="math inline">\(400\)</span> or less, the city considers the beach proper for swimming. Otherwise, the city of Vancouver releases a public statement to warn people that they should not swim on the beach. How should the city proceed?</p>
<p>□</p>
</div>
<p>In <a href="#exm-vancouver-beach" class="quarto-xref">Example&nbsp;1</a> above, we have two competing statements: (1) the beach is safe for swimming (i.e., the average number of E. Coli per <span class="math inline">\(100\)</span>mL is <span class="math inline">\(400\)</span> or less); and (2) the beach is unsafe for swimming (i.e., the average number of E. Coli per <span class="math inline">\(100\)</span>mL is higher than <span class="math inline">\(400\)</span>). The city’s responsibility is to determine which of these statements holds true and to communicate the findings clearly to the public. Their primary objective is not to obtain an exact measurement of the average E. Coli level, but rather to ascertain whether it falls at or below the threshold of <span class="math inline">\(400\)</span>. The specific numerical values, such as whether the average is <span class="math inline">\(75\)</span> or <span class="math inline">\(100\)</span> E. Coli per <span class="math inline">\(100\)</span> milliliters, are less important; what matters is the city’s ability to confidently and reliably identify which statement regarding the beach’s safety is accurate.</p>
<p>Statistical hypothesis testing provides a structured framework for evaluating the strength of evidence contained in a dataset against specific claims or assumptions regarding a broader population. In this chapter, we will delve into the methodology of conducting statistical tests designed to assess various hypotheses related to population characteristics. We’ll explore the principles behind these tests, the types of hypotheses that can be evaluated, and the procedures for drawing conclusions based on the analysis of the data. Through this discussion, we aim to equip you with the necessary tools to statistically assess the validity of claims about a population.</p>
<!--To test the water quality of a beach, the city of Vancouver takes multiple samples of the water and calculates the average number of E. coli (bacteria) per $100$mL.-->
</section>
<section id="statistical-hypotheses-null-vs-alternative" class="level2">
<h2 class="anchored" data-anchor-id="statistical-hypotheses-null-vs-alternative">Statistical Hypotheses: Null vs Alternative</h2>
<p>Let us start by defining what a hypothesis is.</p>
<div id="def-hypothesis" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1 (Statistical Hypothesis)</strong></span> A statement about one or more populations.</p>
</div>
<p>Although the <a href="#def-hypothesis" class="quarto-xref">Definition&nbsp;5</a> is quite broad, a hypothesis usually involves a statement about <em>population parameters</em>. Therefore, in this book, we will restrict our attention to hypotheses that are statements about a population parameters.</p>
<p>In statistical hypothesis testing, we <em>always</em> have two competing and complementary hypotheses: the <strong>null hypothesis</strong> (denoted as <span class="math inline">\(H_0\)</span>) and the <strong>alternative hypothesis</strong> (denoted as <span class="math inline">\(H_A\)</span> or <span class="math inline">\(H_1\)</span>). The null hypothesis represents a default or status quo assumption about the population parameter, often reflecting a lack of effect or no difference. Conversely, the alternative hypothesis represents the claim or effect for which we are trying to find evidence. The goal of hypothesis testing is to assess whether the sample data provides sufficient evidence to reject the null hypothesis in favor of the alternative hypothesis.</p>
<section id="hypotheses-involving-one-population" class="level3">
<h3 class="anchored" data-anchor-id="hypotheses-involving-one-population">Hypotheses involving one population</h3>
<p>When we are testing only one parameter of a given population, we usually have a threshold of interest, which we call <span class="math inline">\(\mu_0\)</span> (for the mean; read <em>mu naught</em>) and <span class="math inline">\(p_0\)</span> (for the proportion; read <em>p naught</em>), and the null hypothesis will have the following form:</p>
<p><span class="math display">\[
H_0: \mu = \mu_0
\]</span></p>
<p>and the alternative hypothesis will have <strong>one</strong> (and only one) of the following three forms:</p>
<ul>
<li><span class="math inline">\(H_A: \mu &lt; \mu_0\)</span></li>
<li><span class="math inline">\(H_A: \mu &gt; \mu_0\)</span></li>
<li><span class="math inline">\(H_A: \mu \neq \mu_0\)</span></li>
</ul>
<p>Naturally, in the case above, we are testing the mean. But we could be testing any other parameter. For example, for proportion, we would replace <span class="math inline">\(\mu\)</span> with <span class="math inline">\(p\)</span>: <span class="math inline">\(H_0: p = p_0\)</span>. Let’s see a few examples.</p>
<div id="exm-flu-vaccine" class="theorem example">
<p><span class="theorem-title"><strong>Example 2</strong></span> A pharmaceutical company has developed a new flu vaccine and wants to determine if it’s more effective than the standard flu vaccine currently in use. The standard vaccine is known to be effective in preventing the flu in 60% of the population who receive it. The company conducts a clinical trial where a random sample of individuals receives the new vaccine. Is the new vaccine more effective than the standard vaccine? The hypotheses are:</p>
<p><span class="math display">\[
H_0: p = 0.60 \quad\quad\text{vs}\quad\quad H_A: p &gt; 0.60
\]</span></p>
<p>□</p>
</div>
<p>Frequently, as in the example above, we can unambiguously identify the null hypothesis. But sometimes, it depends on the problem. See the following two examples.</p>
<div id="exm-LDL-heart" class="theorem example">
<p><span class="theorem-title"><strong>Example 3</strong></span> Heart disease is one of the leading causes of death worldwide, and high cholesterol is a significant risk factor. Medical guidelines recommend that the average level of low-density lipoprotein (LDL), often referred to as “bad” cholesterol, should be below 100 mg/dL to help minimize the risk of heart disease.</p>
<p>In Canada, the government is considering a new community health initiative aimed at reducing heart disease deaths. This initiative would cost approximately $1.23 billion annually. The Official Opposition Party is urging the government to avoid unnecessary expenditures. As a compromise, the government has stated that it drop the project if there is strong evidence showing that the Canadian population has a lower risk of heart disease due to low cholesterol levels.</p>
<p>In this case, we have <span class="math display">\[
H_0: \mu = 100\text{mg/dL}\quad\quad\text{vs}\quad\quad H_A: \mu &lt; 100\text{mg/dL}
\]</span> Therefore, our hypotheses are statements about the mean LDL cholesterol in the Canadian population. Also, note that the government is demanding evidence to believe Canadians are low risk (as opposed to requiring evidence that Canadians are high risk). For this reason, we have the “low risk” case in the alternative hypothesis.</p>
<p>Alternatively, if the government had said that they would only proceed with the program if there were strong evidence that Canadians are at high risk of heart disease, then we would formulate the hypotheses as:</p>
<p><span class="math display">\[
H_0: \mu = 100\text{mg/dL}\quad\quad\text{vs}\quad\quad H_A: \mu &gt; 100\text{mg/dL}
\]</span></p>
<p>□</p>
</div>
<div id="exm-vancouver-beach-hypotheses" class="theorem example">
<p><span class="theorem-title"><strong>Example 4</strong></span> Going back to the Vancouver Beaches example (<a href="#exm-vancouver-beach" class="quarto-xref">Example&nbsp;1</a>). If the city council works under the assumption that the beaches are usually improper for swimming (status-quo), they will require evidence that the beaches are safe for swimming. In this case, <span class="math display">\[
H_0: \mu = 400\quad\quad\text{vs}\quad\quad H_A: \mu &lt; 400
\]</span></p>
<p>Alternatively, the city council could claim that it is very expensive to close the beaches, and they want to do it only if they have evidence that the beaches are not safe for swimming. Then:</p>
<p><span class="math display">\[
H_0: \mu = 400\quad\quad\text{vs}\quad\quad H_A: \mu &gt; 400
\]</span></p>
<p>□</p>
</div>
<p>In statistical hypothesis testing, we begin by assuming that one of two hypotheses, <span class="math inline">\(H_0\)</span> (the null hypothesis) or <span class="math inline">\(H_A\)</span> (the alternative hypothesis), is true. However, we do not know which one it is, and our goal is to determine that. A common question that arises is: what if neither hypothesis is true?</p>
<p>For example, let’s consider the situation presented by <a href="#exm-flu-vaccine" class="quarto-xref">Example&nbsp;2</a>. The hypotheses are defined as follows: <span class="math inline">\(H_0: p = 0.6\)</span> versus <span class="math inline">\(H_A: p &gt; 0.6\)</span>. But what if the vaccine actually has a negative effect? This raises the possibility that, after receiving the vaccine, <span class="math inline">\(p\)</span> could be <strong>less</strong> than 0.6. If we believe this scenario is a real possibility, we could redefine the null hypothesis to be <span class="math inline">\(H_0: p \leq 0.6\)</span> versus <span class="math inline">\(H_A: p &gt; 0.6\)</span>. This way, we encompass all possible outcomes within our two hypotheses.</p>
<p>Fortunately, for the tests discussed in this book, this adjustment does not affect the results of the hypothesis test. Therefore, the conclusions will remain the same whether we use <span class="math inline">\(H_0: p = 0.6\)</span> or <span class="math inline">\(H_0: p \leq 0.6\)</span>. For this reason, we will always express the null hypothesis using the equal sign as follows: <span class="math inline">\(H_0: p = p_0\)</span>.</p>
</section>
<section id="hypotheses-involving-two-populations" class="level3">
<h3 class="anchored" data-anchor-id="hypotheses-involving-two-populations">Hypotheses involving two populations</h3>
<p>When comparing two populations, we are often interested in examining the values of their parameters. Typically, the null hypothesis is stated as:</p>
<p><span class="math display">\[
H_0: \mu_1 - \mu_2 = \Delta_0
\]</span> The alternative hypothesis could take one of the following forms:</p>
<ul>
<li><span class="math inline">\(H_A: \mu_1-\mu_2 &lt; \Delta_0\)</span></li>
<li><span class="math inline">\(H_A: \mu_1-\mu_2 &gt; \Delta_0\)</span></li>
<li><span class="math inline">\(H_A: \mu_1-\mu_2 \neq \Delta_0\)</span></li>
</ul>
<p>Let’s see some examples.</p>
<div id="exm-diff-prop-hypotheses" class="theorem example">
<p><span class="theorem-title"><strong>Example 5</strong></span> <em>Tech Solutions</em>, a software company, is testing two different versions of their website’s landing page. They want to know if one version leads to a higher proportion of visitors signing up for a free trial. They randomly assign website visitors to either version A or version B. They track the number of visitors who sign up for a free trial on each version. In this case, the hypotheses are: <span class="math display">\[
H_0: p_1-p_2=0 \quad\quad \text{ vs } \quad\quad H_A: p_1-p_2\neq0
\]</span> where <span class="math inline">\(p_1\)</span> and <span class="math inline">\(p_2\)</span> are the proportion of sign-ups for versions A and B, respectively. Or, in another words:</p>
<ul>
<li><p><span class="math inline">\(H_0\)</span>: There is no difference in the proportion of visitors who sign up for a free trial between the two landing page versions.</p></li>
<li><p><span class="math inline">\(H_A\)</span>: There is a difference in the proportion of visitors who sign up for a free trial between the two landing page versions.</p></li>
</ul>
<p>Note that in this case, we used <span class="math inline">\(\Delta_0 = 0\)</span>.</p>
<p>□</p>
</div>
<div id="exm-diff-means-hypothese" class="theorem example">
<p><span class="theorem-title"><strong>Example 6</strong></span> “Green Thumb Gardens” wants to test two different fertilizer types to see which promotes better plant growth. They are specifically interested in the average height of tomato plants after a certain period. They take a batch of young tomato plants and randomly assign them to two groups. Group A receives “Fertilizer GrowFast,” and Group B receives “Fertilizer BloomBoost.” After six weeks, they measure the height of each plant in centimetres. They want to determine if there is a difference in the average height of tomato plants between the two fertilizer groups.</p>
<p><span class="math display">\[
H_0: \mu_1-\mu_2=0 \quad\quad \text{ vs } \quad\quad H_A: \mu_1-\mu_2\neq0
\]</span> where <span class="math inline">\(\mu_1\)</span> is the mean height of plants using Fertilizer GrowFast, and <span class="math inline">\(\mu_2\)</span> is the mean height of plants using Fertilizer BloomBoost. Or, in words:</p>
<ul>
<li><p><span class="math inline">\(H_0\)</span>: There is no difference in the average height of tomato plants between the two fertilizer groups.</p></li>
<li><p><span class="math inline">\(H_A\)</span>: There is a difference in the average height of tomato plants between the two fertilizer groups.</p></li>
</ul>
<p>□</p>
</div>
<p>With a clear understanding of how to define statistical hypotheses, we are now equipped to delve into the mechanics of hypothesis testing.</p>
<!--### Conclusion

In this section, we have laid the groundwork for understanding statistical hypothesis testing by defining what a hypothesis is and exploring how to formulate both null and alternative hypotheses. We've seen that hypotheses can be about a single population parameter or about the relationship between parameters from two or more populations. Crucially, we've emphasized that the null hypothesis typically represents a status quo or no-effect scenario, while the alternative hypothesis embodies the claim we are seeking evidence for. Through various examples, we've demonstrated how to translate real-world questions into testable statistical hypotheses, setting the stage for the next step in the process: hypothesis testing.

-->
</section>
<section id="exercises" class="level3">
<h3 class="anchored" data-anchor-id="exercises">Exercises</h3>
</section>
</section>
<section id="the-idea-of-hypothesis-testing" class="level2">
<h2 class="anchored" data-anchor-id="the-idea-of-hypothesis-testing">The idea of hypothesis testing</h2>
<p>Testing hypotheses is similar to being a detective. Detectives do not witness crimes directly; instead, they determine who committed a crime based on the aftermath. This process typically involves considering various scenarios (or hypotheses) and checking whether the evidence collected supports or contradicts them. Importantly, detectives look for evidence that <em>contradicts</em> the “innocent” hypothesis. This is similar to the principle of “innocent until proven guilty” (in statistics, we assume the null hypothesis is true until we find sufficient evidence to reject it).</p>
<section id="how-does-this-relate-to-statistics" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="how-does-this-relate-to-statistics">How does this relate to statistics?</h4>
<p>The null hypothesis, denoted as H0, is either true or false, but we cannot observe it directly—similar to how a detective does not witness the crime being committed. We are unable to observe it directly because we do not have access to the entire population, which means we do not know the true value of the parameter.</p>
<p>However, the null hypothesis,&nbsp;H0, implies a specific sampling distribution for some statistics (the aftermath). We can then take a sample and contrast the value of the statistic against the sampling distribution if&nbsp;H0&nbsp;were true.</p>
<p>Let’s revisit our example with <a href="#exm-flu-vaccine" class="quarto-xref">Example&nbsp;2</a>. Suppose we take a sample of 50 patients. Since we are testing the population proportion, we can use the sample proportion <span class="math inline">\(\hat{p}\)</span> to gain insights about the population mean. <span style="color: darkred;"><strong>If the null hypothesis were true</strong></span>, we know from the Central Limit Theorem (CLT) that <span class="math inline">\(\hat{p} \sim N\left(0.6, \sqrt{\frac{0.6 \times 0.4}{50}}\right)\)</span>. If we used different values for <span class="math inline">\(p_0\)</span> in <span class="math inline">\(H_0\)</span>, the sampling distribution would change accordingly. See the plot below.</p>
<p><br></p>
<div id="fig-sampling-dist-flu" class="quarto-float quarto-figure quarto-figure-center anchored" style="text-align:center;">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sampling-dist-flu-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="320" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 319;"><span id="cb1-320"><a href="#cb1-320" aria-hidden="true" tabindex="-1"></a>viewof p0 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">0.4</span><span class="op">,</span> <span class="fl">0.6</span>]<span class="op">,</span> {</span>
<span id="cb1-321"><a href="#cb1-321" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span></span>
<span id="cb1-322"><a href="#cb1-322" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="fl">0.6</span><span class="op">,</span></span>
<span id="cb1-323"><a href="#cb1-323" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Null hypothesis proportion (p₀)"</span></span>
<span id="cb1-324"><a href="#cb1-324" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb1-325"><a href="#cb1-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-326"><a href="#cb1-326" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb1-327"><a href="#cb1-327" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb1-328"><a href="#cb1-328" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">4</span>]</span>
<span id="cb1-329"><a href="#cb1-329" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb1-330"><a href="#cb1-330" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb1-331"><a href="#cb1-331" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb1-332"><a href="#cb1-332" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="fl">0.001</span>)<span class="op">.</span><span class="fu">map</span>(p <span class="kw">=&gt;</span> ({</span>
<span id="cb1-333"><a href="#cb1-333" aria-hidden="true" tabindex="-1"></a>        p<span class="op">,</span></span>
<span id="cb1-334"><a href="#cb1-334" aria-hidden="true" tabindex="-1"></a>        <span class="dt">density</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span>(<span class="op">-</span><span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>((p <span class="op">-</span> p0)<span class="op">,</span> <span class="dv">2</span>) <span class="op">/</span> (<span class="dv">2</span> <span class="op">*</span> (p0 <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> p0) <span class="op">/</span> <span class="dv">50</span>))) <span class="op">/</span></span>
<span id="cb1-335"><a href="#cb1-335" aria-hidden="true" tabindex="-1"></a>                <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> (p0 <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> p0) <span class="op">/</span> <span class="dv">50</span>))</span>
<span id="cb1-336"><a href="#cb1-336" aria-hidden="true" tabindex="-1"></a>      }))<span class="op">,</span></span>
<span id="cb1-337"><a href="#cb1-337" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb1-338"><a href="#cb1-338" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"p"</span><span class="op">,</span></span>
<span id="cb1-339"><a href="#cb1-339" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"density"</span></span>
<span id="cb1-340"><a href="#cb1-340" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb1-341"><a href="#cb1-341" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb1-342"><a href="#cb1-342" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])</span>
<span id="cb1-343"><a href="#cb1-343" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb1-344"><a href="#cb1-344" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb1-345"><a href="#cb1-345" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">640</span><span class="op">,</span></span>
<span id="cb1-346"><a href="#cb1-346" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb1-347"><a href="#cb1-347" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb1-348"><a href="#cb1-348" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Sample Proportion"</span></span>
<span id="cb1-349"><a href="#cb1-349" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb1-350"><a href="#cb1-350" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb1-351"><a href="#cb1-351" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Density"</span></span>
<span id="cb1-352"><a href="#cb1-352" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-353"><a href="#cb1-353" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sampling-dist-flu-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: The sampling distribution of <span class="math inline">\(\hat{p}\)</span> assuming <span class="math inline">\(H_0: p=p_0\)</span> is true.
</figcaption>
</figure>
</div>
<p><br></p>
<p>The plot above illustrates the sampling distribution of the sample proportion assuming the null hypothesis is true. As you adjust the value of <span class="math inline">\(p_0\)</span>, the distribution shifts accordingly.</p>
<p>Finally, we can collect the data (the evidence), calculate the sample proportion <span class="math inline">\(\hat{p}\)</span>, and compare it to the sampling distribution under the null hypothesis <span class="math inline">\(H_0\)</span>. If the calculated value of the statistic is plausible under <span class="math inline">\(H_0\)</span>, we do not have enough evidence to reject the hypothesis. For instance, in the case of <a href="#exm-flu-vaccine" class="quarto-xref">Example&nbsp;2</a>, where <span class="math inline">\(p_0 = 0.6\)</span>, suppose that after collecting our sample, of size 50 we calculate a sample proportion of <span class="math inline">\(\hat{p} = 0.95\)</span>. The sampling distribution and the statistic are shown in <a href="#fig-null-model-idea-low-pvalue" class="quarto-xref">Figure&nbsp;2</a>.</p>
<div id="fig-null-model-idea-low-pvalue" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-null-model-idea-low-pvalue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-null-model-idea-low-pvalue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: The sampling distribution of <span class="math inline">\(\hat{p}\)</span> in <a href="#exm-flu-vaccine" class="quarto-xref">Example&nbsp;2</a> for a sample of size 50 and an observed <span class="math inline">\(\hat{p}=0.95\)</span> (in red), assuming <span class="math inline">\(H_0\)</span> is true.
</figcaption>
</figure>
</div>
<p>As noted by <a href="#fig-null-model-idea-low-pvalue" class="quarto-xref">Figure&nbsp;2</a>, the observed value of <span class="math inline">\(\hat{p}\)</span> in our sample is <span class="math inline">\(\hat{p} = 0.95\)</span>. This value is <strong>VERY</strong> unlikely to occur if the null hypothesis <span class="math inline">\(H_0\)</span> is true. Therefore, we have two possibilities: either we were simply unlucky and ended up with an unusual sample, or the null hypothesis <span class="math inline">\(H_0\)</span> is false. This suggests that the distribution shown in <a href="#fig-null-model-idea-low-pvalue" class="quarto-xref">Figure&nbsp;2</a> does not accurately represent the true sampling distribution of <span class="math inline">\(\hat{p}\)</span>. This situation is akin to a detective finding the murder weapon with the suspect’s fingerprint on it. While this evidence strongly suggests the suspect’s guilt, it does not conclusively prove it.</p>
<p>Let’s consider an alternative scenario where we collect a sample of size <span class="math inline">\(50\)</span>, and the sample proportion is <span class="math inline">\(\hat{p} = 0.65\)</span>. In this case, it wouldn’t be surprising to observe this <span class="math inline">\(\hat{p}\)</span> value if the null hypothesis <span class="math inline">\(H_0\)</span> were true (see <a href="#fig-null-model-idea-high-pvalue" class="quarto-xref">Figure&nbsp;3</a>). Therefore, the observed value of <span class="math inline">\(\hat{p}\)</span> does not contradict the hypothesis <span class="math inline">\(H_0\)</span>, indicating that the evidence against <span class="math inline">\(H_0\)</span> is weak. However, this does not imply that <span class="math inline">\(H_0\)</span> is true; it simply means that we lack strong evidence to reject it. It’s similar to a detective who cannot find conclusive evidence against a suspect; this absence of evidence does not prove the suspect’s innocence. In other words, the absence of evidence of guilt is not the same as evidence of innocence.</p>
<div id="fig-null-model-idea-high-pvalue" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-null-model-idea-high-pvalue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-null-model-idea-high-pvalue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: The sampling distribution of <span class="math inline">\(\hat{p}\)</span> in <a href="#exm-flu-vaccine" class="quarto-xref">Example&nbsp;2</a> for a sample of size 50 and an observed <span class="math inline">\(\hat{p}=0.65\)</span> (in red), assuming <span class="math inline">\(H_0\)</span> is true.
</figcaption>
</figure>
</div>
<p>Now that we’ve seen how the core idea of hypothesis testing involves comparing our data to what we’d expect under the null hypothesis. But how do we actually do that in practice? The next section will provide a detailed, step-by-step guide to the hypothesis testing procedure, equipping you with the tools to apply these concepts to real-world problems.”</p>
</section>
<section id="the-steps-in-hypothesis-testing" class="level3 numbered">
<h3 class="numbered anchored" data-anchor-id="the-steps-in-hypothesis-testing">The steps in hypothesis testing</h3>
<p>In this book, we will discuss different strategies for hypothesis testing as well as many different hypothesis tests. However, no matter the strategy and the test, we will always be guided by five steps.</p>
<section id="step-1-formulate-the-hypotheses" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="step-1-formulate-the-hypotheses"><strong>Step 1: Formulate the Hypotheses</strong></h4>
<p>In this step, it is essential to clearly define the null hypothesis (<span class="math inline">\(H_0\)</span>) and the alternative hypothesis (<span class="math inline">\(H_A\)</span>). Often, this step in the research process does not receive adequate attention, but formulating these hypotheses is crucial. They guide our statistical analysis and help determine the appropriate tests to use in evaluating the evidence against the null hypothesis. This is the stage where you translate your research problem into a statistical problem, and this “translation” needs to be carefully considered. Otherwise, the conclusions drawn may not adequately address the original question.</p>
</section>
<section id="step-2-define-the-desired-significance-level" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="step-2-define-the-desired-significance-level"><strong>Step 2: Define the desired significance level</strong></h4>
<p>To decide whether to reject or not <span class="math inline">\(H_0\)</span>, we need to determine whether the evidence against <span class="math inline">\(H_0\)</span> is strong. In <a href="#fig-null-model-idea-low-pvalue" class="quarto-xref">Figure&nbsp;2</a>, we argued that the <span class="math inline">\(\hat{p}=0.95\)</span> was highly unlikely to happen if <span class="math inline">\(H_0\)</span> was true and that evidence was very strong against <span class="math inline">\(H_0\)</span>. On the other hand, in <a href="#fig-null-model-idea-high-pvalue" class="quarto-xref">Figure&nbsp;3</a>, we argued that a <span class="math inline">\(\hat{p}\)</span> around <span class="math inline">\(0.65\)</span> would not be unusual if <span class="math inline">\(H_0\)</span> were true, so the evidence against <span class="math inline">\(H_0\)</span> was weak. But at what point did the evidence go from “strong” (<a href="#fig-null-model-idea-low-pvalue" class="quarto-xref">Figure&nbsp;2</a>) to “weak” (<a href="#fig-null-model-idea-high-pvalue" class="quarto-xref">Figure&nbsp;3</a>)? Try changing the value of the sample proportion in <a href="#fig-evidence-strength" class="quarto-xref">Figure&nbsp;4</a>.</p>
<div id="fig-evidence-strength" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-evidence-strength-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="479" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 478;"><span id="cb2-479"><a href="#cb2-479" aria-hidden="true" tabindex="-1"></a>viewof phat <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {</span>
<span id="cb2-480"><a href="#cb2-480" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span></span>
<span id="cb2-481"><a href="#cb2-481" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb2-482"><a href="#cb2-482" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="fu">tex</span><span class="vs">`</span><span class="sc">\h</span><span class="vs">at{p}`</span></span>
<span id="cb2-483"><a href="#cb2-483" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb2-484"><a href="#cb2-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-485"><a href="#cb2-485" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb2-486"><a href="#cb2-486" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb2-487"><a href="#cb2-487" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"14px"</span></span>
<span id="cb2-488"><a href="#cb2-488" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-489"><a href="#cb2-489" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb2-490"><a href="#cb2-490" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">4</span>]</span>
<span id="cb2-491"><a href="#cb2-491" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-492"><a href="#cb2-492" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span>  <span class="co">// Only increase bottom margin for x-axis label</span></span>
<span id="cb2-493"><a href="#cb2-493" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb2-494"><a href="#cb2-494" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb2-495"><a href="#cb2-495" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="fl">0.001</span>)<span class="op">.</span><span class="fu">map</span>(p <span class="kw">=&gt;</span> ({</span>
<span id="cb2-496"><a href="#cb2-496" aria-hidden="true" tabindex="-1"></a>        p<span class="op">,</span></span>
<span id="cb2-497"><a href="#cb2-497" aria-hidden="true" tabindex="-1"></a>        <span class="dt">density</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span>(<span class="op">-</span><span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>((p <span class="op">-</span> <span class="fl">0.6</span>)<span class="op">,</span> <span class="dv">2</span>) <span class="op">/</span> (<span class="dv">2</span> <span class="op">*</span> (<span class="fl">0.6</span> <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> <span class="fl">0.6</span>) <span class="op">/</span> <span class="dv">50</span>))) <span class="op">/</span></span>
<span id="cb2-498"><a href="#cb2-498" aria-hidden="true" tabindex="-1"></a>                <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> (<span class="fl">0.6</span> <span class="op">*</span> (<span class="dv">1</span> <span class="op">-</span> <span class="fl">0.6</span>) <span class="op">/</span> <span class="dv">50</span>))</span>
<span id="cb2-499"><a href="#cb2-499" aria-hidden="true" tabindex="-1"></a>      }))<span class="op">,</span></span>
<span id="cb2-500"><a href="#cb2-500" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb2-501"><a href="#cb2-501" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"p"</span><span class="op">,</span></span>
<span id="cb2-502"><a href="#cb2-502" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"density"</span><span class="op">,</span></span>
<span id="cb2-503"><a href="#cb2-503" aria-hidden="true" tabindex="-1"></a>        <span class="dt">stroke</span><span class="op">:</span> <span class="st">"black"</span></span>
<span id="cb2-504"><a href="#cb2-504" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-505"><a href="#cb2-505" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb2-506"><a href="#cb2-506" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])<span class="op">,</span></span>
<span id="cb2-507"><a href="#cb2-507" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleX</span>([phat]<span class="op">,</span> { <span class="dt">stroke</span><span class="op">:</span> phat <span class="op">&lt;</span> <span class="fl">0.72</span> <span class="op">?</span> <span class="st">"#2e7d32"</span> <span class="op">:</span> <span class="st">"red"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span> })<span class="op">,</span></span>
<span id="cb2-508"><a href="#cb2-508" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb2-509"><a href="#cb2-509" aria-hidden="true" tabindex="-1"></a>      [{<span class="dt">x</span><span class="op">:</span> <span class="fl">0.2</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="fl">3.8</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> phat <span class="op">&gt;=</span> <span class="fl">0.72</span> <span class="op">?</span> <span class="st">"evidence: strong"</span> <span class="op">:</span> <span class="st">"evidence: weak"</span>}]<span class="op">,</span></span>
<span id="cb2-510"><a href="#cb2-510" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb2-511"><a href="#cb2-511" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span></span>
<span id="cb2-512"><a href="#cb2-512" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span></span>
<span id="cb2-513"><a href="#cb2-513" aria-hidden="true" tabindex="-1"></a>        <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span></span>
<span id="cb2-514"><a href="#cb2-514" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fill</span><span class="op">:</span> phat <span class="op">&gt;=</span> <span class="fl">0.72</span> <span class="op">?</span> <span class="st">"red"</span> <span class="op">:</span> <span class="st">"#2e7d32"</span><span class="op">,</span></span>
<span id="cb2-515"><a href="#cb2-515" aria-hidden="true" tabindex="-1"></a>        <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">18</span></span>
<span id="cb2-516"><a href="#cb2-516" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-517"><a href="#cb2-517" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-518"><a href="#cb2-518" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb2-519"><a href="#cb2-519" aria-hidden="true" tabindex="-1"></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-520"><a href="#cb2-520" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">640</span><span class="op">,</span></span>
<span id="cb2-521"><a href="#cb2-521" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">440</span><span class="op">,</span></span>
<span id="cb2-522"><a href="#cb2-522" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb2-523"><a href="#cb2-523" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Sample Proportion"</span><span class="op">,</span></span>
<span id="cb2-524"><a href="#cb2-524" aria-hidden="true" tabindex="-1"></a>    <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">40</span></span>
<span id="cb2-525"><a href="#cb2-525" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-526"><a href="#cb2-526" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb2-527"><a href="#cb2-527" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Density"</span></span>
<span id="cb2-528"><a href="#cb2-528" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-529"><a href="#cb2-529" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-evidence-strength-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Strength of evidence against <span class="math inline">\(H_0\)</span> for different values of <span class="math inline">\(\hat{p}\)</span>. When the vertical line is red, it would result in the rejection <span class="math inline">\(H_0\)</span>. If green, non-rejection of <span class="math inline">\(H_0\)</span>. Note that the vertical line will be determined by your sample.
</figcaption>
</figure>
</div>
<p>As you can see above, the evidence against <span class="math inline">\(H_0\)</span> was considered strong (as in we would reject <span class="math inline">\(H_0\)</span>) for <span class="math inline">\(\hat{p}\)</span> as low as <span class="math inline">\(0.72\)</span>. However, for <span class="math inline">\(\hat{p}=0.71\)</span> the evidence against <span class="math inline">\(H_0\)</span> was now considered weak (as in we would not reject <span class="math inline">\(H_0\)</span>). But why did we use this threshold? Here comes the significance level.</p>
<p>The significance level, commonly denoted by <span class="math inline">\(\alpha\)</span> (/ˈæl.fə/), determines whether the evidence is sufficiently compelling to warrant the rejection of the null hypothesis in favour of the alternative hypothesis.</p>
<p>The significance level is a probability (therefore, it is between <span class="math inline">\(0\)</span> and <span class="math inline">\(1\)</span>) that indicates the likelihood of incorrectly rejecting the null hypothesis when the null hypothesis is, in fact, true — this error is known as a Type I Error. Let’s formally define both of these concepts.</p>
<div id="def-type-I-error" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2 (Type I Error)</strong></span> The error that occurs when <span class="math inline">\(H_0\)</span> is true but is rejected.</p>
</div>
<div id="def-significance-level" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 3 (Significance Level)</strong></span> The probability of Type I Error.</p>
</div>
<p>Significance level and Type I Error can be too abstract and confusing when first learning about it. Let us discuss an example.</p>
<div id="exm-vaccine-alpha" class="theorem example">
<p><span class="theorem-title"><strong>Example 7</strong></span> The standard flu vaccine is known to be effective in preventing the flu in <span class="math inline">\(60\%\)</span> of the population that receives it. A questionable pharmaceutical company has obtained the recipe for this standard flu vaccine and has created <span class="math inline">\(1000\)</span> variants by making minor tweaks to the recipe. They are aware that these small modifications will not affect the vaccine’s effectiveness. Nevertheless, they plan to apply for a license to sell these variants with the U.S. Food and Drug Administration (FDA).</p>
<p>For each vaccine, the FDA will conduct an experimental study to test the following hypotheses: <span class="math display">\[H_0: p = 0.6\quad\quad\text{ vs }\quad\quad H_A: p &gt; 0.6\]</span></p>
<p>Since the modified vaccines are known to have the same effectiveness as the standard flu vaccine, the FDA should reject the license applications for all <span class="math inline">\(1000\)</span> vaccines. However, with a significance level set at <span class="math inline">\(5\%\)</span>, it is expected that approximately <span class="math inline">\(5\%\)</span> of the <span class="math inline">\(1000\)</span> vaccines (around <span class="math inline">\(50\)</span> vaccines) will have their licenses approved despite not meeting the necessary criteria.</p>
<p>In this context:</p>
<ul>
<li><p>The hypothesis of no improvement is represented by <span class="math inline">\(H_0\)</span>.</p></li>
<li><p><span class="math inline">\(H_0\)</span> is known to be true in this scenario.</p></li>
<li><p>Rejecting <span class="math inline">\(H_0\)</span> would result in granting permission to sell the vaccine, which should not occur since <span class="math inline">\(H_0\)</span> is true. This case would be the Type I Error.</p></li>
<li><p>Consequently, around the <span class="math inline">\(\alpha\times 1000\)</span> (in this case, <span class="math inline">\(\alpha=5\%\)</span>) of the license applications will be mistakenly approved.</p></li>
</ul>
<p>□</p>
</div>
<p>Although the value of <span class="math inline">\(\alpha\)</span> can range from 0 to 1, we generally prefer smaller values. It’s important to note that <span class="math inline">\(\alpha\)</span> represents the probability of an error, specifically the probability of rejecting the null hypothesis when it is actually true. Typical values of <span class="math inline">\(\alpha\)</span> are <span class="math inline">\(1\%\)</span>, <span class="math inline">\(5\%\)</span>, and <span class="math inline">\(10\%\)</span>.</p>
</section>
<section id="step-3-identify-an-appropriate-test-statistic" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="step-3-identify-an-appropriate-test-statistic"><strong>Step 3: Identify an appropriate test statistic</strong></h4>
<p>In this step, we choose a statistic (i.e., a function of the sample data) that allows us to assess the compatibility of the data with the null hypothesis. Since we will use this statistic for hypothesis testing, we call it test statistics.</p>
<div id="def-hypothesis" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 4 (Test statistic)</strong></span> A statistic used to test hypothesis.</p>
</div>
<p>The choice of the test statistic depends on the parameter being tested (e.g., mean, proportion), the number of populations being compared, and the assumptions about the data. Examples of test statistics include the sample mean, the difference between two sample means, or a sample proportion.</p>
<p>Test statistics are not unique; we can use different test statistics for the same hypothesis tests. However, these statistics may exhibit varying performances, which can be measured by their probabilities of making errors. As will be discussed later, we often use different (but equivalent) statistics when applying simulation-based methods compared to those based on mathematical models.</p>
</section>
<section id="step-4-identify-the-null-model" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="step-4-identify-the-null-model"><strong>Step 4: Identify the Null Model</strong></h4>
<p>As we did in the flu vaccine example (<a href="#exm-flu-vaccine" class="quarto-xref">Example&nbsp;2</a>), we need to figure out the distribution of the test statistic if the null hypothesis is true. This distribution is called the <strong>null model</strong>. This distribution is crucial because it allows us to determine how likely it is to observe the value of the test statistic calculated from our sample if the null hypothesis was indeed true.</p>
<div id="def-hypothesis" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 5 (Null model)</strong></span> The sampling distribution of the test statistic if the null hypothesis is true.</p>
</div>
<p>It is at this stage that we pretend that a scenario is true (the null hypothesis) and see if the statistic we obtained from the sample we have collected is compatible with this scenario. In the detective analogy, this is the stage where the detective imagines a scenario and tries to figure out if the evidence collected is compatible with this scenario:</p>
<blockquote class="blockquote">
<p>“If a person is innocent, it would be very unlikely for me to find their fingerprint in the crime weapon. But I found their fingerprint in the crime weapon. Therefore, the innocent hypothesis seems incompatible with the evidence.”</p>
</blockquote>
<div id="exm-null-model-flu-vaccine" class="theorem example">
<p><span class="theorem-title"><strong>Example 8</strong></span> By identifying the null model, we create a baseline against which we can compare our observed sample statistic. For instance, if we observe a sample proportion of <span class="math inline">\(\hat{p}=0.95\)</span>, as shown in <a href="#fig-null-model-idea-low-pvalue" class="quarto-xref">Figure&nbsp;2</a>, we can see how unlikely this observation would be under the null model. Conversely, an observation like <span class="math inline">\(\hat{p}=0.65\)</span>, as in <a href="#fig-null-model-idea-high-pvalue" class="quarto-xref">Figure&nbsp;3</a>, is more plausible under the null model. Therefore, the null model provides the framework for assessing the evidence against the null hypothesis.</p>
</div>
<p>□</p>
</section>
<section id="step-5-compute-the-p-value-and-make-a-decision" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="step-5-compute-the-p-value-and-make-a-decision"><strong>Step 5: Compute the p-value and make a decision</strong></h4>
<p>This is the final step in the hypothesis-testing process. The p-value measures the strength of the evidence against the null hypothesis. It can be tricky to interpret the p-value, but you could think about the p-values as a measure of how compatible the data is with the null hypothesis. High p-values suggest that the data is compatible with the null hypothesis, while low p-values indicate that the data is incompatible with the null hypothesis.</p>
<div id="def-p-value" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 6 (p-value)</strong></span> The probability, under the null model, of observing a test statistic at least as extreme as the one observed in the sample data, in favor of <span class="math inline">\(H_A\)</span>.</p>
</div>
<p>The definition of the p-value is quite abstract, but it is easier to understand with an example.</p>
<div id="exm-p-value-flu-vaccine" class="theorem example">
<p><span class="theorem-title"><strong>Example 9</strong></span> Let’s revisit the flu vaccine example (<a href="#exm-flu-vaccine" class="quarto-xref">Example&nbsp;2</a>). We are testing the hypotheses: <span class="math display">\[
H_0: p = 0.6 \quad\quad\text{vs}\quad\quad H_A: p &gt; 0.6
\]</span></p>
<p>Suppose we take a sample of <span class="math inline">\(50\)</span> patients and observe that <span class="math inline">\(45\)</span> of them are protected from the flu by the new vaccine. Since we are testing the population proportion, let us use the sample proportion as the test statistic for this test. Now, if <span class="math inline">\(H_0\)</span> is true what is the sampling distribution of <span class="math inline">\(\hat{p}\)</span>? This is the null model and it is shown in <a href="#fig-null-model-flu-vaccine" class="quarto-xref">Figure&nbsp;5</a>.</p>
<div id="fig-null-model-flu-vaccine" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-null-model-flu-vaccine-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-null-model-flu-vaccine-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: The sampling distribution of <span class="math inline">\(\hat{p}\)</span> assuming <span class="math inline">\(H_0: p=0.6\)</span> is true (i.e., the null model).
</figcaption>
</figure>
</div>
<p>Great! According to the null model (i.e., assuming <span class="math inline">\(H_0\)</span> is true), we would expect to observe a <span class="math inline">\(\hat{p}\)</span> around <span class="math inline">\(0.5\)</span> and <span class="math inline">\(0.7\)</span>. If we end up observing a <span class="math inline">\(\hat{p}\)</span>, say, around <span class="math inline">\(0.9\)</span>, we are either very “unlucky” or <span class="math inline">\(H_0\)</span> is not true. Imagine we obtained a sample proportion <span class="math inline">\(\hat{p}=35/50=0.7\)</span> as shown in <a href="#fig-p-value-flu-vaccine-with-obs-test-statistic" class="quarto-xref">Figure&nbsp;6</a>.</p>
<div id="fig-p-value-flu-vaccine-with-obs-test-statistic" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-p-value-flu-vaccine-with-obs-test-statistic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-p-value-flu-vaccine-with-obs-test-statistic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: The null model when <span class="math inline">\(H_0: p=0.6\)</span> is true and the value of the test statistic.
</figcaption>
</figure>
</div>
<p>To calculate the p-value we want the probability of observing a <span class="math inline">\(\hat{p}\)</span> being at least as extreme as the one we observed (i.e., <span class="math inline">\(0.7\)</span>). under the null model <strong>in favour of the alternative hypothesis</strong>. We know that the alternative hypothesis states that <span class="math inline">\(p&gt;0.6\)</span>. So the “alternative” side of the distribution is the right side. The p-value is the area to the right of the observed test statistic. This is shown in <a href="#fig-p-value-flu-vaccine-pvalue" class="quarto-xref">Figure&nbsp;7</a>.</p>
<div id="fig-p-value-flu-vaccine-pvalue" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-p-value-flu-vaccine-pvalue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-p-value-flu-vaccine-pvalue-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: The proportion of points in the red bins is the p-value, which in this case is 0.0771.
</figcaption>
</figure>
</div>
<p>In this case, the p-value is 0.0771. This means that if <span class="math inline">\(H_0\)</span> is true, only <span class="math inline">\(7.71\%\)</span> of the possible samples would yield a <span class="math inline">\(\hat{p}\)</span> of <span class="math inline">\(0.7\)</span> or higher. Is this too rare, suggestion that <span class="math inline">\(H_0\)</span> is false? To answer this question, we need to compare the p-value to the significance level. If the p-value is less than the significance level, we reject <span class="math inline">\(H_0\)</span>. Otherwise, we do not have enough evidence to reject <span class="math inline">\(H_0\)</span>.</p>
<p>□</p>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>p-value is a conditional probability. Conditioned on <span class="math inline">\(H_0\)</span> being true. This condition comes into play because we use the null model to calculate the p-value.</p>
</div>
</div>
<p>Next, let’s break down the definition of p-value:</p>
<blockquote class="blockquote">
<p>The p-value is the <span class="math inline">\(\underbrace{\text{probability, under the null model}}_{\#1}\)</span>, of observing a <span class="math inline">\(\underbrace{\text{test statistic at least as extreme as the one observed in the sample data}}_{\#2}\)</span>, <span class="math inline">\(\underbrace{\text{in favour of }H_A}_{\#3}\)</span>.</p>
</blockquote>
<p>Let’s dissect this definition:</p>
<ul>
<li><p><span class="math inline">\(\#1\)</span>: The p-value is a probability, which means it ranges from 0 to 1. We can calculate as the area under the curve in mathematical models, or counting the proportions of points in simulation-based methods.</p></li>
<li><p><span class="math inline">\(\#2\)</span>: This tells us the threshold for “extreme”, which is the observed test statistic.</p></li>
<li><p><span class="math inline">\(\#3\)</span>: This part brings the alternative hypothesis into play. It defines the direction that we consider “extreme”. The area on the right? on the left? or both sides?</p></li>
</ul>
<p>The point <span class="math inline">\(\#3\)</span> above determines the type of test we are conducting. There are three types of tests:</p>
</section>
<section id="left-tailed-test-h_a-theta-theta_0" class="level4">
<h4 class="anchored" data-anchor-id="left-tailed-test-h_a-theta-theta_0"><strong>Left-tailed test (<span class="math inline">\(H_A: \theta &lt; \theta_0\)</span>)</strong></h4>
<p>If the alternative hypothesis is of the form <span class="math inline">\(H_A: \theta &lt; \theta_0\)</span>, where <span class="math inline">\(\theta\)</span> is any parameter of interest, the p-value is the area on the left of the observed test statistic (<span class="math inline">\(\leq\)</span> – equal sign included), as shown in <a href="#fig-p-value-flu-vaccine-pvalue-left-tailed" class="quarto-xref">Figure&nbsp;8</a> below.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="747" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 746;"><span id="cb3-747"><a href="#cb3-747" aria-hidden="true" tabindex="-1"></a><span class="co">// Generate fixed simulated data</span></span>
<span id="cb3-748"><a href="#cb3-748" aria-hidden="true" tabindex="-1"></a>simulatedData <span class="op">=</span> {</span>
<span id="cb3-749"><a href="#cb3-749" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">getRandomNumber</span>(min<span class="op">,</span> max) {</span>
<span id="cb3-750"><a href="#cb3-750" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> (max <span class="op">-</span> min) <span class="op">+</span> min<span class="op">;</span></span>
<span id="cb3-751"><a href="#cb3-751" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-752"><a href="#cb3-752" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> n <span class="op">=</span> <span class="dv">2000</span><span class="op">;</span></span>
<span id="cb3-753"><a href="#cb3-753" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb3-754"><a href="#cb3-754" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb3-755"><a href="#cb3-755" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> u1 <span class="op">=</span> <span class="fu">getRandomNumber</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb3-756"><a href="#cb3-756" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> u2 <span class="op">=</span> <span class="fu">getRandomNumber</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb3-757"><a href="#cb3-757" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> z <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="op">-</span><span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span>(u1)) <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(<span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> u2)<span class="op">;</span></span>
<span id="cb3-758"><a href="#cb3-758" aria-hidden="true" tabindex="-1"></a>    data<span class="op">.</span><span class="fu">push</span>(z)<span class="op">;</span></span>
<span id="cb3-759"><a href="#cb3-759" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-760"><a href="#cb3-760" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> data<span class="op">;</span></span>
<span id="cb3-761"><a href="#cb3-761" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div id="fig-p-value-flu-vaccine-pvalue-left-tailed" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-p-value-flu-vaccine-pvalue-left-tailed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="769" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 768;"><span id="cb4-769"><a href="#cb4-769" aria-hidden="true" tabindex="-1"></a>viewof statistic_left_tail <span class="op">=</span> {</span>
<span id="cb4-770"><a href="#cb4-770" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> input <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span>]<span class="op">,</span> {</span>
<span id="cb4-771"><a href="#cb4-771" aria-hidden="true" tabindex="-1"></a>    <span class="dt">step</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span></span>
<span id="cb4-772"><a href="#cb4-772" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb4-773"><a href="#cb4-773" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Test Statistic"</span></span>
<span id="cb4-774"><a href="#cb4-774" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-775"><a href="#cb4-775" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-776"><a href="#cb4-776" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">select</span>(input)<span class="op">.</span><span class="fu">select</span>(<span class="st">'input[type="number"]'</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"display"</span><span class="op">,</span> <span class="st">"none"</span>)<span class="op">;</span></span>
<span id="cb4-777"><a href="#cb4-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-778"><a href="#cb4-778" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> input</span>
<span id="cb4-779"><a href="#cb4-779" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-780"><a href="#cb4-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-781"><a href="#cb4-781" aria-hidden="true" tabindex="-1"></a><span class="co">// Create histogram data</span></span>
<span id="cb4-782"><a href="#cb4-782" aria-hidden="true" tabindex="-1"></a>histogram_data_left_tail <span class="op">=</span> d3<span class="op">.</span><span class="fu">bin</span>()</span>
<span id="cb4-783"><a href="#cb4-783" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">domain</span>([<span class="op">-</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span>])</span>
<span id="cb4-784"><a href="#cb4-784" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">thresholds</span>(<span class="dv">20</span>)</span>
<span id="cb4-785"><a href="#cb4-785" aria-hidden="true" tabindex="-1"></a>  (simulatedData)</span>
<span id="cb4-786"><a href="#cb4-786" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">map</span>(bin <span class="kw">=&gt;</span> ({</span>
<span id="cb4-787"><a href="#cb4-787" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x0</span><span class="op">:</span> bin<span class="op">.</span><span class="at">x0</span><span class="op">,</span></span>
<span id="cb4-788"><a href="#cb4-788" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x1</span><span class="op">:</span> bin<span class="op">.</span><span class="at">x1</span><span class="op">,</span></span>
<span id="cb4-789"><a href="#cb4-789" aria-hidden="true" tabindex="-1"></a>    <span class="dt">count</span><span class="op">:</span> bin<span class="op">.</span><span class="at">length</span></span>
<span id="cb4-790"><a href="#cb4-790" aria-hidden="true" tabindex="-1"></a>  }))<span class="op">;</span></span>
<span id="cb4-791"><a href="#cb4-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-792"><a href="#cb4-792" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb4-793"><a href="#cb4-793" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> chartWidth <span class="op">=</span> <span class="dv">640</span><span class="op">;</span></span>
<span id="cb4-794"><a href="#cb4-794" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> chartHeight <span class="op">=</span> <span class="dv">440</span><span class="op">;</span></span>
<span id="cb4-795"><a href="#cb4-795" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginBottom <span class="op">=</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb4-796"><a href="#cb4-796" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginLeft <span class="op">=</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb4-797"><a href="#cb4-797" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginRight <span class="op">=</span> <span class="dv">120</span><span class="op">;</span></span>
<span id="cb4-798"><a href="#cb4-798" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginTop <span class="op">=</span> <span class="dv">40</span><span class="op">;</span></span>
<span id="cb4-799"><a href="#cb4-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-800"><a href="#cb4-800" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> x <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb4-801"><a href="#cb4-801" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="op">-</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span>])</span>
<span id="cb4-802"><a href="#cb4-802" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>([marginLeft<span class="op">,</span> chartWidth <span class="op">-</span> marginRight])<span class="op">;</span></span>
<span id="cb4-803"><a href="#cb4-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-804"><a href="#cb4-804" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> y <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb4-805"><a href="#cb4-805" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">max</span>(histogram_data_left_tail<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">count</span>)])</span>
<span id="cb4-806"><a href="#cb4-806" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>([chartHeight <span class="op">-</span> marginBottom<span class="op">,</span> marginTop])<span class="op">;</span></span>
<span id="cb4-807"><a href="#cb4-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-808"><a href="#cb4-808" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb4-809"><a href="#cb4-809" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> chartWidth)</span>
<span id="cb4-810"><a href="#cb4-810" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> chartHeight)<span class="op">;</span></span>
<span id="cb4-811"><a href="#cb4-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-812"><a href="#cb4-812" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add title</span></span>
<span id="cb4-813"><a href="#cb4-813" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb4-814"><a href="#cb4-814" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> chartWidth <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb4-815"><a href="#cb4-815" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> <span class="dv">25</span>)</span>
<span id="cb4-816"><a href="#cb4-816" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb4-817"><a href="#cb4-817" aria-hidden="true" tabindex="-1"></a>      <span class="co">//.style("font-size", "20px")</span></span>
<span id="cb4-818"><a href="#cb4-818" aria-hidden="true" tabindex="-1"></a>      <span class="co">//.style("font-weight", "bold")</span></span>
<span id="cb4-819"><a href="#cb4-819" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="st">"p-value region for a left-tailed test"</span>)<span class="op">;</span></span>
<span id="cb4-820"><a href="#cb4-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-821"><a href="#cb4-821" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add X axis without numbers</span></span>
<span id="cb4-822"><a href="#cb4-822" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb4-823"><a href="#cb4-823" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(0, </span><span class="sc">${</span>chartHeight <span class="op">-</span> marginBottom<span class="sc">}</span><span class="vs">)`</span>)</span>
<span id="cb4-824"><a href="#cb4-824" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisBottom</span>(x)<span class="op">.</span><span class="fu">tickFormat</span>(<span class="st">""</span>))<span class="op">;</span></span>
<span id="cb4-825"><a href="#cb4-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-826"><a href="#cb4-826" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add custom tick for observed test statistic</span></span>
<span id="cb4-827"><a href="#cb4-827" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb4-828"><a href="#cb4-828" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> <span class="fu">x</span>(statistic_left_tail))</span>
<span id="cb4-829"><a href="#cb4-829" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> chartHeight <span class="op">-</span> marginBottom <span class="op">+</span> <span class="dv">20</span>)</span>
<span id="cb4-830"><a href="#cb4-830" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb4-831"><a href="#cb4-831" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="st">"Observed Test Statistic"</span>)<span class="op">;</span></span>
<span id="cb4-832"><a href="#cb4-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-833"><a href="#cb4-833" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add X axis label</span></span>
<span id="cb4-834"><a href="#cb4-834" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb4-835"><a href="#cb4-835" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(</span><span class="sc">${</span>chartWidth <span class="op">/</span> <span class="dv">2</span><span class="sc">}</span><span class="vs">, </span><span class="sc">${</span>chartHeight <span class="op">-</span> <span class="dv">20</span><span class="sc">}</span><span class="vs">)`</span>)</span>
<span id="cb4-836"><a href="#cb4-836" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb4-837"><a href="#cb4-837" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="st">"Test Statistic"</span>)<span class="op">;</span></span>
<span id="cb4-838"><a href="#cb4-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-839"><a href="#cb4-839" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add Y axis without numbers</span></span>
<span id="cb4-840"><a href="#cb4-840" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb4-841"><a href="#cb4-841" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(</span><span class="sc">${</span>marginLeft<span class="sc">}</span><span class="vs">, 0)`</span>)</span>
<span id="cb4-842"><a href="#cb4-842" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisLeft</span>(y)<span class="op">.</span><span class="fu">tickFormat</span>(<span class="st">""</span>))<span class="op">;</span></span>
<span id="cb4-843"><a href="#cb4-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-844"><a href="#cb4-844" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add Y axis label</span></span>
<span id="cb4-845"><a href="#cb4-845" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb4-846"><a href="#cb4-846" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"rotate(-90)"</span>)</span>
<span id="cb4-847"><a href="#cb4-847" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb4-848"><a href="#cb4-848" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> <span class="dv">0</span> <span class="op">-</span> (chartHeight <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb4-849"><a href="#cb4-849" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"1em"</span>)</span>
<span id="cb4-850"><a href="#cb4-850" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb4-851"><a href="#cb4-851" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="st">"Count"</span>)<span class="op">;</span></span>
<span id="cb4-852"><a href="#cb4-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-853"><a href="#cb4-853" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Steelblue part of the bars (now for values greater than statistic)</span></span>
<span id="cb4-854"><a href="#cb4-854" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".steelblue-bar"</span>)</span>
<span id="cb4-855"><a href="#cb4-855" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(histogram_data_left_tail)</span>
<span id="cb4-856"><a href="#cb4-856" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb4-857"><a href="#cb4-857" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb4-858"><a href="#cb4-858" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"steelblue-bar"</span>)</span>
<span id="cb4-859"><a href="#cb4-859" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">x</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">x0</span><span class="op">,</span> statistic_left_tail)))</span>
<span id="cb4-860"><a href="#cb4-860" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">count</span>))</span>
<span id="cb4-861"><a href="#cb4-861" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> <span class="fu">x</span>(d<span class="op">.</span><span class="at">x1</span>) <span class="op">-</span> <span class="fu">x</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">x0</span><span class="op">,</span> statistic_left_tail))))</span>
<span id="cb4-862"><a href="#cb4-862" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> d <span class="kw">=&gt;</span> chartHeight <span class="op">-</span> marginBottom <span class="op">-</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">count</span>))</span>
<span id="cb4-863"><a href="#cb4-863" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"steelblue"</span>)</span>
<span id="cb4-864"><a href="#cb4-864" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"white"</span>)<span class="op">;</span></span>
<span id="cb4-865"><a href="#cb4-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-866"><a href="#cb4-866" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Red part of the bars (now for values less than or equal to statistic)</span></span>
<span id="cb4-867"><a href="#cb4-867" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".red-bar"</span>)</span>
<span id="cb4-868"><a href="#cb4-868" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(histogram_data_left_tail)</span>
<span id="cb4-869"><a href="#cb4-869" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb4-870"><a href="#cb4-870" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb4-871"><a href="#cb4-871" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"red-bar"</span>)</span>
<span id="cb4-872"><a href="#cb4-872" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">x</span>(d<span class="op">.</span><span class="at">x0</span>))</span>
<span id="cb4-873"><a href="#cb4-873" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">count</span>))</span>
<span id="cb4-874"><a href="#cb4-874" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> <span class="fu">x</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(d<span class="op">.</span><span class="at">x1</span><span class="op">,</span> statistic_left_tail)) <span class="op">-</span> <span class="fu">x</span>(d<span class="op">.</span><span class="at">x0</span>)))</span>
<span id="cb4-875"><a href="#cb4-875" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> d <span class="kw">=&gt;</span> chartHeight <span class="op">-</span> marginBottom <span class="op">-</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">count</span>))</span>
<span id="cb4-876"><a href="#cb4-876" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb4-877"><a href="#cb4-877" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"white"</span>)<span class="op">;</span></span>
<span id="cb4-878"><a href="#cb4-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-879"><a href="#cb4-879" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb4-880"><a href="#cb4-880" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="fu">x</span>(statistic_left_tail))</span>
<span id="cb4-881"><a href="#cb4-881" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="fu">x</span>(statistic_left_tail))</span>
<span id="cb4-882"><a href="#cb4-882" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="fu">y</span>(<span class="dv">0</span>))</span>
<span id="cb4-883"><a href="#cb4-883" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="fu">y</span>(d3<span class="op">.</span><span class="fu">max</span>(histogram_data_left_tail<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">count</span>)))</span>
<span id="cb4-884"><a href="#cb4-884" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb4-885"><a href="#cb4-885" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb4-886"><a href="#cb4-886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-887"><a href="#cb4-887" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Calculate and display p-value (changed to left-tail)</span></span>
<span id="cb4-888"><a href="#cb4-888" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> p_value <span class="op">=</span> histogram_data_left_tail<span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x1</span> <span class="op">&lt;=</span> statistic_left_tail)</span>
<span id="cb4-889"><a href="#cb4-889" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">count</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> d3<span class="op">.</span><span class="fu">sum</span>(histogram_data_left_tail<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">count</span>)<span class="op">;</span></span>
<span id="cb4-890"><a href="#cb4-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-891"><a href="#cb4-891" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Moved p-value text left and up</span></span>
<span id="cb4-892"><a href="#cb4-892" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb4-893"><a href="#cb4-893" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> chartWidth <span class="op">-</span> marginRight <span class="op">-</span> <span class="dv">20</span>)</span>
<span id="cb4-894"><a href="#cb4-894" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> chartHeight <span class="op">/</span> <span class="dv">3</span>)</span>
<span id="cb4-895"><a href="#cb4-895" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"start"</span>)</span>
<span id="cb4-896"><a href="#cb4-896" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="vs">`p-value: </span><span class="sc">${</span>p_value<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb4-897"><a href="#cb4-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-898"><a href="#cb4-898" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb4-899"><a href="#cb4-899" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-p-value-flu-vaccine-pvalue-left-tailed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;8: The probability that the test statistic is <strong>lower</strong> than the observed values of the test statistic in the current sample, assuming <span class="math inline">\(H_0\)</span> is true.
</figcaption>
</figure>
</div>
</section>
<section id="right-tailed-test-h_a-theta-theta_0" class="level4">
<h4 class="anchored" data-anchor-id="right-tailed-test-h_a-theta-theta_0"><strong>Right-tailed test (<span class="math inline">\(H_A: \theta &gt; \theta_0\)</span>)</strong></h4>
<p>If the alternative hypothesis is of the form <span class="math inline">\(H_A: \theta &gt; \theta_0\)</span>, where <span class="math inline">\(\theta\)</span> is any parameter of interest, the p-value is the area on the left of the observed test statistic (<span class="math inline">\(\geq\)</span> – equal sign included), as shown in <a href="#fig-p-value-flu-vaccine-pvalue-right-tailed" class="quarto-xref">Figure&nbsp;9</a>.</p>
<div id="fig-p-value-flu-vaccine-pvalue-right-tailed" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-p-value-flu-vaccine-pvalue-right-tailed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="913" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 912;"><span id="cb5-913"><a href="#cb5-913" aria-hidden="true" tabindex="-1"></a>viewof statistic <span class="op">=</span> {</span>
<span id="cb5-914"><a href="#cb5-914" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> input <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span>]<span class="op">,</span> {</span>
<span id="cb5-915"><a href="#cb5-915" aria-hidden="true" tabindex="-1"></a>    <span class="dt">step</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span></span>
<span id="cb5-916"><a href="#cb5-916" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb5-917"><a href="#cb5-917" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Test Statistic"</span></span>
<span id="cb5-918"><a href="#cb5-918" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-919"><a href="#cb5-919" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-920"><a href="#cb5-920" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">select</span>(input)<span class="op">.</span><span class="fu">select</span>(<span class="st">'input[type="number"]'</span>)<span class="op">.</span><span class="fu">style</span>(<span class="st">"display"</span><span class="op">,</span> <span class="st">"none"</span>)<span class="op">;</span></span>
<span id="cb5-921"><a href="#cb5-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-922"><a href="#cb5-922" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> input</span>
<span id="cb5-923"><a href="#cb5-923" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-924"><a href="#cb5-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-925"><a href="#cb5-925" aria-hidden="true" tabindex="-1"></a><span class="co">// Create histogram data</span></span>
<span id="cb5-926"><a href="#cb5-926" aria-hidden="true" tabindex="-1"></a>histogram_data_right_tailed <span class="op">=</span> d3<span class="op">.</span><span class="fu">bin</span>()</span>
<span id="cb5-927"><a href="#cb5-927" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">domain</span>([<span class="op">-</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span>])</span>
<span id="cb5-928"><a href="#cb5-928" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">thresholds</span>(<span class="dv">20</span>)</span>
<span id="cb5-929"><a href="#cb5-929" aria-hidden="true" tabindex="-1"></a>  (simulatedData)</span>
<span id="cb5-930"><a href="#cb5-930" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">map</span>(bin <span class="kw">=&gt;</span> ({</span>
<span id="cb5-931"><a href="#cb5-931" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x0</span><span class="op">:</span> bin<span class="op">.</span><span class="at">x0</span><span class="op">,</span></span>
<span id="cb5-932"><a href="#cb5-932" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x1</span><span class="op">:</span> bin<span class="op">.</span><span class="at">x1</span><span class="op">,</span></span>
<span id="cb5-933"><a href="#cb5-933" aria-hidden="true" tabindex="-1"></a>    <span class="dt">count</span><span class="op">:</span> bin<span class="op">.</span><span class="at">length</span></span>
<span id="cb5-934"><a href="#cb5-934" aria-hidden="true" tabindex="-1"></a>  }))<span class="op">;</span></span>
<span id="cb5-935"><a href="#cb5-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-936"><a href="#cb5-936" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb5-937"><a href="#cb5-937" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> chartWidth <span class="op">=</span> <span class="dv">640</span><span class="op">;</span></span>
<span id="cb5-938"><a href="#cb5-938" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> chartHeight <span class="op">=</span> <span class="dv">440</span><span class="op">;</span></span>
<span id="cb5-939"><a href="#cb5-939" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginBottom <span class="op">=</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb5-940"><a href="#cb5-940" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginLeft <span class="op">=</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb5-941"><a href="#cb5-941" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginRight <span class="op">=</span> <span class="dv">120</span><span class="op">;</span></span>
<span id="cb5-942"><a href="#cb5-942" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> marginTop <span class="op">=</span> <span class="dv">40</span><span class="op">;</span>  <span class="co">// Added margin top</span></span>
<span id="cb5-943"><a href="#cb5-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-944"><a href="#cb5-944" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> x <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb5-945"><a href="#cb5-945" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="op">-</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span>])</span>
<span id="cb5-946"><a href="#cb5-946" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>([marginLeft<span class="op">,</span> chartWidth <span class="op">-</span> marginRight])<span class="op">;</span></span>
<span id="cb5-947"><a href="#cb5-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-948"><a href="#cb5-948" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> y <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()</span>
<span id="cb5-949"><a href="#cb5-949" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">max</span>(histogram_data_right_tailed<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">count</span>)])</span>
<span id="cb5-950"><a href="#cb5-950" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">range</span>([chartHeight <span class="op">-</span> marginBottom<span class="op">,</span> marginTop])<span class="op">;</span>  <span class="co">// Updated to account for top margin</span></span>
<span id="cb5-951"><a href="#cb5-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-952"><a href="#cb5-952" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb5-953"><a href="#cb5-953" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> chartWidth)</span>
<span id="cb5-954"><a href="#cb5-954" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> chartHeight)<span class="op">;</span></span>
<span id="cb5-955"><a href="#cb5-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-956"><a href="#cb5-956" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add title</span></span>
<span id="cb5-957"><a href="#cb5-957" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb5-958"><a href="#cb5-958" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> chartWidth <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb5-959"><a href="#cb5-959" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> <span class="dv">25</span>)</span>
<span id="cb5-960"><a href="#cb5-960" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb5-961"><a href="#cb5-961" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="st">"16px"</span>)</span>
<span id="cb5-962"><a href="#cb5-962" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="st">"p-value region for a right-tailed test"</span>)<span class="op">;</span></span>
<span id="cb5-963"><a href="#cb5-963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-964"><a href="#cb5-964" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add X axis without numbers</span></span>
<span id="cb5-965"><a href="#cb5-965" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb5-966"><a href="#cb5-966" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(0, </span><span class="sc">${</span>chartHeight <span class="op">-</span> marginBottom<span class="sc">}</span><span class="vs">)`</span>)</span>
<span id="cb5-967"><a href="#cb5-967" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisBottom</span>(x)<span class="op">.</span><span class="fu">tickFormat</span>(<span class="st">""</span>))<span class="op">;</span></span>
<span id="cb5-968"><a href="#cb5-968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-969"><a href="#cb5-969" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add custom tick for observed test statistic</span></span>
<span id="cb5-970"><a href="#cb5-970" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb5-971"><a href="#cb5-971" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> <span class="fu">x</span>(statistic))</span>
<span id="cb5-972"><a href="#cb5-972" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> chartHeight <span class="op">-</span> marginBottom <span class="op">+</span> <span class="dv">20</span>)</span>
<span id="cb5-973"><a href="#cb5-973" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb5-974"><a href="#cb5-974" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="st">"Observed Test Statistic"</span>)<span class="op">;</span></span>
<span id="cb5-975"><a href="#cb5-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-976"><a href="#cb5-976" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add X axis label</span></span>
<span id="cb5-977"><a href="#cb5-977" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb5-978"><a href="#cb5-978" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(</span><span class="sc">${</span>chartWidth <span class="op">/</span> <span class="dv">2</span><span class="sc">}</span><span class="vs">, </span><span class="sc">${</span>chartHeight <span class="op">-</span> <span class="dv">20</span><span class="sc">}</span><span class="vs">)`</span>)</span>
<span id="cb5-979"><a href="#cb5-979" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb5-980"><a href="#cb5-980" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="st">"Test Statistic"</span>)<span class="op">;</span></span>
<span id="cb5-981"><a href="#cb5-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-982"><a href="#cb5-982" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add Y axis without numbers</span></span>
<span id="cb5-983"><a href="#cb5-983" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb5-984"><a href="#cb5-984" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`translate(</span><span class="sc">${</span>marginLeft<span class="sc">}</span><span class="vs">, 0)`</span>)</span>
<span id="cb5-985"><a href="#cb5-985" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">call</span>(d3<span class="op">.</span><span class="fu">axisLeft</span>(y)<span class="op">.</span><span class="fu">tickFormat</span>(<span class="st">""</span>))<span class="op">;</span></span>
<span id="cb5-986"><a href="#cb5-986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-987"><a href="#cb5-987" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add Y axis label</span></span>
<span id="cb5-988"><a href="#cb5-988" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb5-989"><a href="#cb5-989" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"rotate(-90)"</span>)</span>
<span id="cb5-990"><a href="#cb5-990" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb5-991"><a href="#cb5-991" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> <span class="dv">0</span> <span class="op">-</span> (chartHeight <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb5-992"><a href="#cb5-992" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"1em"</span>)</span>
<span id="cb5-993"><a href="#cb5-993" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"middle"</span>)</span>
<span id="cb5-994"><a href="#cb5-994" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="st">"Count"</span>)<span class="op">;</span></span>
<span id="cb5-995"><a href="#cb5-995" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-996"><a href="#cb5-996" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Gray part of the bars</span></span>
<span id="cb5-997"><a href="#cb5-997" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".gray-bar"</span>)</span>
<span id="cb5-998"><a href="#cb5-998" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(histogram_data_right_tailed)</span>
<span id="cb5-999"><a href="#cb5-999" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb5-1000"><a href="#cb5-1000" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb5-1001"><a href="#cb5-1001" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"gray-bar"</span>)</span>
<span id="cb5-1002"><a href="#cb5-1002" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">x</span>(d<span class="op">.</span><span class="at">x0</span>))</span>
<span id="cb5-1003"><a href="#cb5-1003" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">count</span>))</span>
<span id="cb5-1004"><a href="#cb5-1004" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> <span class="fu">x</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(d<span class="op">.</span><span class="at">x1</span><span class="op">,</span> statistic)) <span class="op">-</span> <span class="fu">x</span>(d<span class="op">.</span><span class="at">x0</span>)))</span>
<span id="cb5-1005"><a href="#cb5-1005" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> d <span class="kw">=&gt;</span> chartHeight <span class="op">-</span> marginBottom <span class="op">-</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">count</span>))</span>
<span id="cb5-1006"><a href="#cb5-1006" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"steelblue"</span>)</span>
<span id="cb5-1007"><a href="#cb5-1007" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"white"</span>)<span class="op">;</span></span>
<span id="cb5-1008"><a href="#cb5-1008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1009"><a href="#cb5-1009" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Red part of the bars</span></span>
<span id="cb5-1010"><a href="#cb5-1010" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".red-bar"</span>)</span>
<span id="cb5-1011"><a href="#cb5-1011" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(histogram_data_right_tailed)</span>
<span id="cb5-1012"><a href="#cb5-1012" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">enter</span>()</span>
<span id="cb5-1013"><a href="#cb5-1013" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb5-1014"><a href="#cb5-1014" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"red-bar"</span>)</span>
<span id="cb5-1015"><a href="#cb5-1015" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">x</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">x0</span><span class="op">,</span> statistic)))</span>
<span id="cb5-1016"><a href="#cb5-1016" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">count</span>))</span>
<span id="cb5-1017"><a href="#cb5-1017" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> <span class="fu">x</span>(d<span class="op">.</span><span class="at">x1</span>) <span class="op">-</span> <span class="fu">x</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(d<span class="op">.</span><span class="at">x0</span><span class="op">,</span> statistic))))</span>
<span id="cb5-1018"><a href="#cb5-1018" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> d <span class="kw">=&gt;</span> chartHeight <span class="op">-</span> marginBottom <span class="op">-</span> <span class="fu">y</span>(d<span class="op">.</span><span class="at">count</span>))</span>
<span id="cb5-1019"><a href="#cb5-1019" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb5-1020"><a href="#cb5-1020" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"white"</span>)<span class="op">;</span></span>
<span id="cb5-1021"><a href="#cb5-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1022"><a href="#cb5-1022" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb5-1023"><a href="#cb5-1023" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> <span class="fu">x</span>(statistic))</span>
<span id="cb5-1024"><a href="#cb5-1024" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> <span class="fu">x</span>(statistic))</span>
<span id="cb5-1025"><a href="#cb5-1025" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> <span class="fu">y</span>(<span class="dv">0</span>))</span>
<span id="cb5-1026"><a href="#cb5-1026" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> <span class="fu">y</span>(d3<span class="op">.</span><span class="fu">max</span>(histogram_data_right_tailed<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">count</span>)))</span>
<span id="cb5-1027"><a href="#cb5-1027" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"red"</span>)</span>
<span id="cb5-1028"><a href="#cb5-1028" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb5-1029"><a href="#cb5-1029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1030"><a href="#cb5-1030" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Calculate and display p-value</span></span>
<span id="cb5-1031"><a href="#cb5-1031" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> p_value <span class="op">=</span> histogram_data_right_tailed<span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">x0</span> <span class="op">&gt;=</span> statistic)</span>
<span id="cb5-1032"><a href="#cb5-1032" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">count</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> d3<span class="op">.</span><span class="fu">sum</span>(histogram_data_right_tailed<span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">count</span>)<span class="op">;</span></span>
<span id="cb5-1033"><a href="#cb5-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1034"><a href="#cb5-1034" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Moved p-value text left and up</span></span>
<span id="cb5-1035"><a href="#cb5-1035" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb5-1036"><a href="#cb5-1036" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> chartWidth <span class="op">-</span> marginRight <span class="op">-</span> <span class="dv">20</span>)</span>
<span id="cb5-1037"><a href="#cb5-1037" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> chartHeight <span class="op">/</span> <span class="dv">3</span>)</span>
<span id="cb5-1038"><a href="#cb5-1038" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">style</span>(<span class="st">"text-anchor"</span><span class="op">,</span> <span class="st">"start"</span>)</span>
<span id="cb5-1039"><a href="#cb5-1039" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">text</span>(<span class="vs">`p-value: </span><span class="sc">${</span>p_value<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb5-1040"><a href="#cb5-1040" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-1041"><a href="#cb5-1041" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb5-1042"><a href="#cb5-1042" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-p-value-flu-vaccine-pvalue-right-tailed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9: The probability that the test statistic is <strong>higher</strong> than the observed values of the test statistic in the current sample, assuming <span class="math inline">\(H_0\)</span> is true.
</figcaption>
</figure>
</div>
</section>
<section id="two-tailed-test-h_a-theta-neq-theta_0" class="level4">
<h4 class="anchored" data-anchor-id="two-tailed-test-h_a-theta-neq-theta_0"><strong>Two-tailed test (<span class="math inline">\(H_A: \theta \neq \theta_0\)</span>)</strong></h4>
<p>Now consider the alternative hypothesis is of the form <span class="math inline">\(H_A: \theta \neq \theta_0\)</span>, where <span class="math inline">\(\theta\)</span> is any parameter of interest. To calculate the p-value in this case, we follow these four steps:</p>
<ol type="1">
<li>Calculate the p-value as if the test were a right-tailed test: <span class="math inline">\(p_{\text{right}}\)</span>.</li>
<li>Calculate the p-value as if the test were a left-tailed test: <span class="math inline">\(p_{\text{left}}\)</span>.</li>
<li>Select the smaller of <span class="math inline">\(p_{\text{right}}\)</span> and <span class="math inline">\(p_{\text{left}}\)</span>, then multiply it by 2.</li>
<li>Finally, since the p-value is a probability, ensure it does not exceed 1.</li>
</ol>
<p>In mathematical terms, this can be expressed as: <span class="math inline">\(p = \min\{1, 2p_{\text{right}}, 2p_{\text{left}}\}\)</span>. This approach is called <em>twice-the-smaller-tail</em> <span class="citation" data-cites="thulin2024modern">(<a href="#ref-thulin2024modern" role="doc-biblioref">Thulin 2024</a>)</span>.</p>
</section>
</section>
<section id="exercises-1" class="level3">
<h3 class="anchored" data-anchor-id="exercises-1">Exercises</h3>
<!-- For them to practice p-value:
provide them with a context for hypothesis test, provide the hypothes2s. Give them the null model. 
  (1) the nullmodel as mathematical distribution;
  (2) the null as a simulated dataframe in a variable for them to code.
  (3) Create several versions of this question for each type of test (left-tailed, right-tailed, two-tailed)
Ask them to calculate the p-value. -->
</section>
</section>
<section id="simulation-based-hypothesis-testing" class="level2">
<h2 class="anchored" data-anchor-id="simulation-based-hypothesis-testing">Simulation-based hypothesis testing</h2>
<p>The challenging aspect of hypothesis testing lies in identifying the test statistic and its null model. The null model represents the sampling distribution of the test statistic, assuming the null hypothesis is true. As we have seen before, we can investigate the sampling distribution of the test statistic via simulation-based approaches and mathematical approximations.</p>
<p>In this chapter, we will concentrate on simulation-based methods, while the mathematical approach will be covered in the next chapter. The fundamental idea behind simulation-based methods is to simulate values from the null model and use these simulated values to approximate the p-value.</p>
<section id="one-population" class="level3">
<h3 class="anchored" data-anchor-id="one-population">One population</h3>
<p>In this section, we will focus on problems involving a single parameter of a given population.</p>
<section id="test-for-one-mean-mu" class="level4">
<h4 class="anchored" data-anchor-id="test-for-one-mean-mu">Test for one mean (<span class="math inline">\(\mu\)</span>)</h4>
<p>Let us go back again to <a href="#exm-vancouver-beach" class="quarto-xref">Example&nbsp;1</a>. During the summer, Vancouver’s beaches get pretty busy. To ensure everybody’s safety, the city of Vancouver monitors if the beaches’ waters are safe for swimming. To test the water quality of a beach, the city of Vancouver takes multiple samples of the water and calculates the average number of E. coli (bacteria) per <span class="math inline">\(100\)</span> mL. If the average number of E. coli per <span class="math inline">\(100\)</span>mL is <span class="math inline">\(400\)</span> or less, the city considers the beach proper for swimming. Otherwise, the city of Vancouver releases a warning to let people know that they should not swim on the beach. The city wants to test if the water is unsafe.</p>
<p>Suppose that right before the summer, the city of Vancouver is going to test the water at Kitsilano Beach. Given the cost of closing a beach, the City of Vancouver wants to do that only if there’s strong evidence that they should do it. They set the hypotheses:</p>
<p><span class="math display">\[
H_0: \mu = 400\quad\quad\text{vs}\quad\quad H_A: \mu &gt; 400
\]</span></p>
<p>To test the hypothesis, the technicians took <span class="math inline">\(59\)</span> samples of <span class="math inline">\(100\)</span> mL at different points of the beach. The data is available in the variable <code>kits_sample</code> in the code cell below.</p>
<div class="cell" data-autorun="true" data-edit="false">
<div>
<div id="webr-1" class="exercise-cell">

</div>
<script type="webr-1-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVkaXQiOmZhbHNlLCJldmFsIjp0cnVlLCJvdXRwdXQiOmZhbHNlfSwiY29kZSI6InNldC5zZWVkKDEpXG5cbmtpdHNfZWNvbGlfc2FtcGxlIDwtIHJub3JtKDU5LCA0MTUsIDg1LjY4KVxua2l0c19zYW1wbGUgPC0gdGliYmxlKFxuICBlX2NvbGkgPSByb3VuZChraXRzX2Vjb2xpX3NhbXBsZSAtIG1lYW4oa2l0c19lY29saV9zYW1wbGUpICsgNDE1KVxuKVxuXG5zYW1wbGVfbWVhbiA8LSBtZWFuKGtpdHNfc2FtcGxlJGVfY29saSlcbnNhbXBsZV9zZCA8LSBzZChraXRzX3NhbXBsZSRlX2NvbGkpIn0=
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-2" class="exercise-cell">

</div>
<script type="webr-2-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIFNhbXBsZSBkYXRhIGZyb20gS2l0c2lsYW5vIEJlYWNoICNcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xua2l0c19zYW1wbGUifQ==
</script>
</div>
</div>
<p>Let’s examine the sample data more closely.</p>
<div class="cell">
<div>
<div id="webr-3" class="exercise-cell">

</div>
<script type="webr-3-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBDYWxjdWxhdGUgc2FtcGxlIG1lYW4gYW5kIHNhbXBsZSBzdGQuIGRldi4gI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuc2FtcGxlX21lYW4gPC0gbWVhbihraXRzX3NhbXBsZSRlX2NvbGkpXG5zYW1wbGVfc2QgPC0gc2Qoa2l0c19zYW1wbGUkZV9jb2xpKVxuXG4jIFByaW50IHRoZSB2YWx1ZSBvZiB0aGUgc3RhdGlzdGljc1xuY2F0KFwiU2FtcGxlIG1lYW46XCIsIHNhbXBsZV9tZWFuKVxuY2F0KFwiU2FtcGxlIHN0ZC4gZGV2LjpcIiwgc2FtcGxlX3NkKVxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBQbG90IHRoZSBzYW1wbGUgZGlzdHJpYnV0aW9uICNcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5raXRzX3NhbXBsZSAlPiVcbiAgZ2dwbG90KCkgKyBcbiAgZ2VvbV9oaXN0b2dyYW0oYWVzKGVfY29saSksIFxuICAgICAgICAgICAgICAgICBjb2xvciA9ICd3aGl0ZScsXG4gICAgICAgICAgICAgICAgIGZpbGwgPSAnc3RlZWxibHVlJywgXG4gICAgICAgICAgICAgICAgIGJpbnMgPSAxMCkgKyBcbiAgZ2d0aXRsZShcIlNhbXBsZSBEaXN0cmlidXRpb24gb2YgRS4gQ29saSBwZXIgMTAwbUwgaW4gNTkgc2FtcGxlcyBmcm9tIEtpdHNpbGFubyBCZWFjaFwiKSArIFxuICB4bGFiKCdFLiBDb2xpJykgKyBcbiAgdGhlbWVfYncoKSJ9
</script>
</div>
</div>
<p>Now that we have the data, we need to determine if our sample is “compatible” with the null hypothesis. The null hypothesis states that the population mean is equal to 400 E. coli. Therefore, if the null hypothesis is true, we would expect the sample mean to be close to 400. This suggests that the sample mean is a reasonable test statistic in this context. But how close does the sample mean need to be to 400? To answer this question, we must consider what the sampling distribution of the sample would look like if the null hypothesis were true; this represents the null model.</p>
<p>We learned that we can use bootstrapping to approximate the sampling distribution of <span class="math inline">\(\bar{X}\)</span>.</p>
<div class="cell">
<div>
<div id="webr-4" class="exercise-cell">

</div>
<script type="webr-4-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIEdlbmVyYXRlIHRoZSBib290c3RyYXAgZGlzdHJpYnV0aW9uICNcbiMgYmFzZWQgb24ga2l0c19zYW1wbGUuICAgICAgICAgICAgICAgIyAgIFxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5ib290X2Rpc3QgPC0gXG4gIGtpdHNfc2FtcGxlICU+JVxuICByZXBfc2FtcGxlX24oc2l6ZSA9IDU5LCByZXBsYWNlPVRSVUUsIHJlcHMgPSAxMDAwMCkgJT4lXG4gIHN1bW1hcmlzZSh4YmFyID0gbWVhbihlX2NvbGkpKVxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBQbG90IHRoZSBib290c3RyYXAgZGlzdHJpYnV0aW9uICNcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5ib290X2Rpc3QgJT4lXG4gIGdncGxvdCgpICsgXG4gIGdlb21faGlzdG9ncmFtKGFlcyh4YmFyKSwgXG4gICAgICAgICAgICAgICAgIGNvbG9yID0gJ3doaXRlJywgXG4gICAgICAgICAgICAgICAgIGZpbGwgPSAnc3RlZWxibHVlJywgXG4gICAgICAgICAgICAgICAgIGJpbnMgPSAyMCkgK1xuICBnZ3RpdGxlKCdCb290c3RyYXAgRGlzdHJpYnV0aW9uJykgKyBcbiAgeGxhYignQXZnLiBFLiBDb2xpIHBlciAxMDBtTCcpICtcbiAgdGhlbWVfYncoKSJ9
</script>
</div>
</div>
<p>The issue with the Bootstrap Distribution generated above is that it attempts to approximate the true sampling distribution, rather than representing the sampling distribution when the null hypothesis <span class="math inline">\(H_0\)</span> is true, which corresponds to the null model. Therefore, if <span class="math inline">\(H_0\)</span> is false, the Bootstrap distribution does not reflect the null model.</p>
<p>To adapt our code to generate samples from the null model instead of the sampling distribution, we need to incorporate the information provided by the null hypothesis. In this example, the null hypothesis asserts that <span class="math inline">\(\mu = 400\)</span>, indicating that the mean of the null model is <span class="math inline">\(400\)</span>. To create our null model, we can shift our sample distribution so that its mean is <span class="math inline">\(400\)</span>. Remember, the mean of the boostrap distribution in this case is the sample mean, so this shift will make the bootstrap distribution to be centered at <span class="math inline">\(400\)</span> as specified by our null hypothesis. The code is very similar to generate the bootstrap distribution with only one extra step that centers the sample distribution at <span class="math inline">\(\mu_0\)</span> (in this case <span class="math inline">\(\mu_0 = 400\)</span>).</p>
<div class="cell">
<div>
<div id="webr-5" class="exercise-cell">

</div>
<script type="webr-5-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgQXBwcm94aW1hdGluZyB0aGUgbnVsbCBtb2RlbCB2aWEgQm9vdHN0cmFwcGluZyAjXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbCA8LSBcbiAga2l0c19zYW1wbGUgJT4lXG4gIG11dGF0ZShlX2NvbGkgPSBlX2NvbGkgLSBtZWFuKGVfY29saSkgKyA0MDApICU+JSAgXG4gIHJlcF9zYW1wbGVfbihzaXplID0gNTksIHJlcGxhY2U9VFJVRSwgcmVwcyA9IDEwMDAwKSAlPiVcbiAgc3VtbWFyaXNlKHhiYXIgPSBtZWFuKGVfY29saSkpXG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIFBsb3QgdGhlIG51bGwgbW9kZWwgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbm51bGxfbW9kZWwgJT4lXG4gIGdncGxvdCgpICsgXG4gIGdlb21faGlzdG9ncmFtKGFlcyh4YmFyKSwgXG4gICAgICAgICAgICAgICAgIGNvbG9yID0gJ3doaXRlJywgXG4gICAgICAgICAgICAgICAgIGZpbGwgPSAnc3RlZWxibHVlJywgXG4gICAgICAgICAgICAgICAgIGJpbnMgPSAyMCkgK1xuICBnZ3RpdGxlKCdOdWxsIG1vZGVsIHZpYSBTaW11bGF0aW9uJykgKyBcbiAgeGxhYignQXZnLiBFLiBDb2xpIHBlciAxMDBtTCcpICtcbiAgdGhlbWVfYncoKSJ9
</script>
</div>
</div>
<p>As you can see, the only difference here is the inclusion for the line <code>mutate(e_coli = e_coli - mean(e_coli) + 400)</code>. Here’s how it works:</p>
<p>The expression <code>e_coli - mean(e_coli)</code> centers the mean of the sample at 0. The spread remains the same. By adding <span class="math inline">\(400\)</span> to this result, we shift the mean of the sample to 400. In other words, <code>e_coli - mean(e_coli) + 400</code> makes the sample mean to be <span class="math inline">\(400\)</span>. Again, the mean of the boostrap distribution in this case is the sample mean, which now will be <span class="math inline">\(400\)</span>, as specified in <span class="math inline">\(H_0\)</span>. Therefore, the distribution above is the sampling distribution of <span class="math inline">\(\bar{X}\)</span> when the null hypothesis is true, i.e., the null model.</p>
<p>At this point, we understand how our test statistic, <span class="math inline">\(\bar{X}\)</span>, behaves if <span class="math inline">\(H_0\)</span> is true. But how does the observed value of the test statistic in our specific sample compare to the null model? Specifically, we want to determine how likely it is to obtain a value for the test statistic that is equal to or greater than our observed mean.</p>
<div class="cell">
<div>
<div id="webr-6" class="exercise-cell">

</div>
<script type="webr-6-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgUGxvdCB0aGUgbnVsbCBtb2RlbCB2cyBPYnNlcnZlZCBUZXN0IFN0YXRpc3RpYyAjXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbCAlPiVcbiAgZ2dwbG90KCkgKyBcbiAgZ2VvbV9oaXN0b2dyYW0oYWVzKHhiYXIpLCBcbiAgICAgICAgICAgICAgICAgY29sb3IgPSAnd2hpdGUnLCBcbiAgICAgICAgICAgICAgICAgZmlsbCA9ICdzdGVlbGJsdWUnLCBcbiAgICAgICAgICAgICAgICAgYmlucyA9IDIwKSArXG4gIGdlb21fdmxpbmUoYWVzKHhpbnRlcmNlcHQgPSBzYW1wbGVfbWVhbiksIGNvbG9yPSdyZWQnKSArIFxuICBhbm5vdGF0ZShcInJlY3RcIiwgXG4gICAgICAgICAgIHhtaW4gPSBzYW1wbGVfbWVhbiwgeG1heCA9IEluZiwgXG4gICAgICAgICAgIHltaW4gPSAtSW5mLCB5bWF4ID0gSW5mLFxuICAgICAgICAgICBhbHBoYSA9IC4yLCBcbiAgICAgICAgICAgZmlsbCA9ICdyZWQnKSArXG4gIGdndGl0bGUoJ051bGwgbW9kZWwgdmlhIFNpbXVsYXRpb24gdnMgVGVzdCBTdGF0aXN0aWMnKSArIFxuICB4bGFiKCdBdmcuIEUuIENvbGkgcGVyIDEwMG1MJykgK1xuICB0aGVtZV9idygpIn0=
</script>
</div>
</div>
<p>The observed test statistic is positioned at the right tail of the null model, indicating that such a high sample average is somewhat unlikely to occur when the null hypothesis is true. But just how unlikely is it? To determine this, we can calculate the proportion of all possible samples that would result in a sample average at least as high as the one we observed if the null hypothesis were true. This value is known as the p-value.</p>
<div class="cell">
<div>
<div id="webr-7" class="exercise-cell">

</div>
<script type="webr-7-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIENhbGN1bGF0ZSBwLXZhbHVlICNcbiMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuKHB2YWx1ZSA8LSBtZWFuKG51bGxfbW9kZWwkeGJhciA+PSBzYW1wbGVfbWVhbikpXG5cbiMgTm90ZSB0aGF0IGhlcmUsIHdlIGFyZSBjaGVja2luZyB3aGV0aGVyIHRoZSBcbiMgbWVhbiBnZW5lcmF0ZWQgZnJvbSB0aGUgbnVsbCBtb2RlbCBpcyBcbiMgaGlnaGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG1lYW4gaW4gb3VyIHNhbXBsZS4gIn0=
</script>
</div>
</div>
<p>This means that if <span class="math inline">\(H_0\)</span> were true, only 5% of the samples would give us a sample mean as high as or higher than the observed sample mean. Were we very unlucky of selecting such a rare sample, or is <span class="math inline">\(H_0\)</span> false? To make this decision we compare the p-value against the significance level. For example, for a significance level of <span class="math inline">\(\alpha = 10\%\)</span>, we have that <span class="math inline">\(\text{p-value} &lt; \alpha\)</span>, and we reject <span class="math inline">\(H_0\)</span>. In this case we say:</p>
<blockquote class="blockquote">
<p>There is enough evidence at <span class="math inline">\(10\%\)</span> significance level to reject the hypothesis that the average count of E. Coli per <span class="math inline">\(100\)</span> mL in the Kitsilano beach is 400 in favour of the alternative hypothesis that the average is higher than 400.</p>
</blockquote>
<p>For <span class="math inline">\(\alpha = 5\%\)</span>, we have that <span class="math inline">\(\text{p-value} &gt; \alpha\)</span>, and in this case, we would not reject <span class="math inline">\(H_0\)</span>:</p>
<blockquote class="blockquote">
<p>There is not enough evidence at <span class="math inline">\(5\%\)</span> significance level to reject the null hypothesis that the average count of E. Coli per <span class="math inline">\(100\)</span> mL in the Kitsilano beach is 400 in favour of the alternative hypothesis that the average is higher than 400.</p>
</blockquote>
<p>It is important to note that the significance level must be defined before looking at the data. You must not adjust your significance level to reach the conclusion you desire.</p>
<section id="the-infer-workflow" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="the-infer-workflow">The <code>infer</code> workflow</h5>
<p>Although the workflow above is helpful for us to explore the process of simulation-based hypothesis testing, the <code>infer</code> package <span class="citation" data-cites="infer2021">(<a href="#ref-infer2021" role="doc-biblioref">Couch et al. 2021</a>)</span> provides a more convenient way to do this, which is very similar to the workflow we have used for confidence intervals. To simulate from the null model, we just need to add one extra line.</p>
<div class="cell">
<div>
<div id="webr-8" class="exercise-cell">

</div>
<script type="webr-8-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbmZlciB3b3JrZmxvdzogZ2VuZXJhdGUgdGhlIG51bGwgbW9kZWwgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9pbmZlciA8LSBcbiAga2l0c19zYW1wbGUgJT4lXG4gIHNwZWNpZnkocmVzcG9uc2UgPSBlX2NvbGkpICU+JVxuICBoeXBvdGhlc2l6ZShtdSA9IDQwMCwgbnVsbCA9ICdwb2ludCcpICU+JVxuICBnZW5lcmF0ZShyZXBzID0gMjAwMDAsIHR5cGUgPSAnYm9vdHN0cmFwJykgJT4lXG4gIGNhbGN1bGF0ZShzdGF0ID0gJ21lYW4nKVxuXG4jIExldCdzIHRha2UgYSBsb29rOlxubnVsbF9tb2RlbF9pbmZlciAlPiUgaGVhZCgpIn0=
</script>
</div>
</div>
<p>The only function from this workflow we haven’t seen before is the <a href="https://infer.netlify.app/reference/hypothesize">hypothesize</a> function. The <code>hypothesize</code> function defines the null hypothesis (i.e., we define the parameter of interest and its value under <span class="math inline">\(H_0\)</span>). In this case, we are saying: <code>null = point</code>, which tells <code>infer</code> that we want to test only one parameter. To specify the parameter to be tested and its value under <span class="math inline">\(H_0\)</span>, we passed <code>mu = 400</code>. The <code>mu</code> says that we are testing the mean (we could have said <code>p = ...</code> [for proportion] or <code>med = ...</code> [for the median]), and <code>400</code> specifies the value of <span class="math inline">\(\mu_0\)</span>.</p>
<p>The variable <code>null_model_infer</code> stores the simulated values from the null model. To get the p-value, we can use the <code>get_p_value</code> function (or its alias <code>get_pvalue</code>). For the <code>get_p_value</code> function, you need to specify the observed test statistic and the direction of the test, in this case the observed sample mean and <code>right</code>-tailed test.</p>
<div class="cell">
<div>
<div id="webr-9" class="exercise-cell">

</div>
<script type="webr-9-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbmZlciB3b3JrZmxvdzogZ2V0IHAtdmFsdWUgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9pbmZlciAlPiVcbiAgZ2V0X3BfdmFsdWUoc2FtcGxlX21lYW4sIGRpcmVjdGlvbiA9ICdyaWdodCcpIn0=
</script>
</div>
</div>
<p>Finally, to visualize the test, we can use the <code>visualize</code> function combined with the <code>shade_pvalue</code>.</p>
<div class="cell">
<div>
<div id="webr-10" class="exercise-cell">

</div>
<script type="webr-10-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgSW5mZXIgd29ya2Zsb3c6IHZpc3VhbGl6ZSB0aGUgdGVzdCBhbmQgcC12YWx1ZSAjXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9pbmZlciAlPiVcbiAgdmlzdWFsaXplKCkgKyBcbiAgc2hhZGVfcHZhbHVlKHNhbXBsZV9tZWFuLCBkaXJlY3Rpb24gPSAncmlnaHQnKSJ9
</script>
</div>
</div>
</section>
</section>
<section id="test-for-one-median-q_0.5" class="level4">
<h4 class="anchored" data-anchor-id="test-for-one-median-q_0.5">Test for one median (<span class="math inline">\(Q_{0.5}\)</span>)</h4>
<p>The case of the median is very similar to the mean. Let’s go over the procedures with an example.</p>
<div id="exm-senate-hearing" class="theorem example">
<p><span class="theorem-title"><strong>Example 10</strong></span> A Senate hearing is currently investigating consumer complaints regarding airlines in the United States. During one of the sessions, the CEO of American Airlines was questioned about the time it takes for the company to resolve customer support tickets. The CEO stated that the median resolution time is 48 hours, indicating that 50% of the tickets are resolved in 48 hours or less. In response to this claim, the Senate hearing committee decided to conduct a further investigation. They collected a sample of 100 support tickets and examined the resolution times in hours, which are recorded in the <code>support_time</code> variable.The senate will test the hypothesis <span class="math display">\[
H_0: Q_{0.5} = 48 \quad\quad vs \quad\quad H_A: Q_{0.5} &gt; 48
\]</span> and if there is enough evidence at <span class="math inline">\(5\%\)</span> significance level, the senate will issue a fine to American Airlines.</p>
<div class="cell" data-autorun="true" data-edit="false">
<div>
<div id="webr-11" class="exercise-cell">

</div>
<script type="webr-11-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVkaXQiOmZhbHNlLCJldmFsIjp0cnVlLCJvdXRwdXQiOmZhbHNlfSwiY29kZSI6InNldC5zZWVkKDEpXG5cbnN1cHBvcnRfdGltZSA8LSB0aWJibGUoXG4gIHRpbWVfaHJzID0gMTggKiAoYWJzKHJ0KDEwMCwgMSkpKzIpXG4pXG5cbnN1cHBfdGltZV9tZWRpYW4gPC0gbWVkaWFuKHN1cHBvcnRfdGltZSR0aW1lX2hycykifQ==
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-12" class="exercise-cell">

</div>
<script type="webr-12-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIFNhbXBsZSBkYXRhIGZyb20gc3VwcG9ydCB0aWNrZXRzICNcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuc3VwcG9ydF90aW1lICU+JSBoZWFkKClcblxuKHN1cHBfdGltZV9tZWRpYW4gPC0gbWVkaWFuKHN1cHBvcnRfdGltZSR0aW1lX2hycykpIn0=
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-13" class="exercise-cell">

</div>
<script type="webr-13-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBQbG90IHNhbXBsZSBkaXN0cmlidXRpb24gI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuc3VwcG9ydF90aW1lICU+JVxuICBnZ3Bsb3QoKSArXG4gIGdlb21faGlzdG9ncmFtKGFlcyh0aW1lX2hycyksIFxuICAgICAgICAgICAgICAgICBjb2xvciA9ICd3aGl0ZScsIFxuICAgICAgICAgICAgICAgICBmaWxsID0gJ3N0ZWVsYmx1ZScsXG4gICAgICAgICAgICAgICAgIGJpbnMgPSAyMCkgKyBcbiAgeGxhYihcIlJlc29sdXRpb24gVGltZSAoaHJzKVwiKSArIFxuICBnZ3RpdGxlKFwiU2FtcGxlIGRpc3RyaWJ1dGlvbiBvZiBBbWVyaWNhbiBBaXJsaW5lIHN1cHBvcnQgdGlja2V0c1wiKSArIFxuICB0aGVtZV9idygpIn0=
</script>
</div>
</div>
<p>Next, we will simulate values from the null model. We cannot simply resample from our sample because this approach will not accurately represent the null model if the null hypothesis (<span class="math inline">\(H_0\)</span>) is false. However, similar to how we might adjust for the mean, we can shift our sample so that the median matches the value specified in <span class="math inline">\(H_0\)</span>, which is 48 hours.</p>
<div class="cell">
<div>
<div id="webr-14" class="exercise-cell">

</div>
<script type="webr-14-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgQXBwcm94aW1hdGluZyB0aGUgbnVsbCBtb2RlbCB2aWEgQm9vdHN0cmFwcGluZyAjXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9zdXBwX3RpbWUgPC0gXG4gIHN1cHBvcnRfdGltZSAlPiVcbiAgbXV0YXRlKHRpbWVfaHJzID0gdGltZV9ocnMgLSBtZWRpYW4odGltZV9ocnMpICsgNDgpICU+JVxuICByZXBfc2FtcGxlX24oc2l6ZSA9IDEwMCwgcmVwcyA9IDE1MDAwLCByZXBsYWNlID0gVFJVRSkgJT4lXG4gIHN1bW1hcmlzZShxXzUwID0gbWVkaWFuKHRpbWVfaHJzKSkifQ==
</script>
</div>
</div>
<p>Finally we can calculate the p-value.</p>
<div class="cell">
<div>
<div id="webr-15" class="exercise-cell">

</div>
<script type="webr-15-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgQ2FsY3VsYXRlIHRoZSBwLXZhbHVlLiAjXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuKHBfdmFsdWUgPC0gbWVhbihudWxsX21vZGVsX3N1cHBfdGltZSRxXzUwID4gc3VwcF90aW1lX21lZGlhbikpIn0=
</script>
</div>
</div>
<p>Since the p-value is approximately 31%, the Senate does not have enough evidence at a 5% significance level to reject the American Airlines CEO’s claim that the median time to resolve a support ticket is 48 hours.</p>
<p>Again, the <code>infer</code> workflow makes this entire analysis more convenient. To generate from the null model using the infer workflow in this case:</p>
<div class="cell">
<div>
<div id="webr-16" class="exercise-cell">

</div>
<script type="webr-16-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbmZlciB3b3JrZmxvdzogZ2VuZXJhdGUgdGhlIG51bGwgbW9kZWwgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9zdXBwX3RpbWVfaW5mZXIgPC0gXG4gIHN1cHBvcnRfdGltZSAlPiVcbiAgc3BlY2lmeShyZXNwb25zZSA9IHRpbWVfaHJzKSAlPiVcbiAgaHlwb3RoZXNpc2UobnVsbCA9ICdwb2ludCcsIG1lZCA9IDQ4KSAlPiVcbiAgZ2VuZXJhdGUocmVwcyA9IDE1MDAwLCB0eXBlID0gXCJib290c3RyYXBcIikgJT4lXG4gIGNhbGN1bGF0ZShzdGF0ID0gXCJtZWRpYW5cIikifQ==
</script>
</div>
</div>
<p>Next, we obtain the p-value.</p>
<div class="cell">
<div>
<div id="webr-17" class="exercise-cell">

</div>
<script type="webr-17-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbmZlciB3b3JrZmxvdzogT2J0YWluIHAtdmFsdWUgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9zdXBwX3RpbWVfaW5mZXIgJT4lXG4gIGdldF9wX3ZhbHVlKG9ic19zdGF0ID0gc3VwcF90aW1lX21lZGlhbiwgZGlyZWN0aW9uID0gJ3JpZ2h0JykifQ==
</script>
</div>
</div>
<p>Finally, the <code>visualize</code> function gives us an overall picture of the test.</p>
<div class="cell">
<div>
<div id="webr-18" class="exercise-cell">

</div>
<script type="webr-18-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbmZlciB3b3JrZmxvdzogdmlzdWFsaXplIHRlc3QgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9zdXBwX3RpbWVfaW5mZXIgJT4lXG4gIHZpc3VhbGlzZSgpICtcbiAgc2hhZGVfcHZhbHVlKG9ic19zdGF0ID0gc3VwcF90aW1lX21lZGlhbiwgZGlyZWN0aW9uID0gJ3JpZ2h0JykifQ==
</script>
</div>
</div>
</div>
</section>
<section id="test-for-one-proportion-p" class="level4">
<h4 class="anchored" data-anchor-id="test-for-one-proportion-p">Test for one proportion (<span class="math inline">\(p\)</span>)</h4>
<p>Suppose we want to test <span class="math inline">\(H_0: p = p_0\)</span> against one of <span class="math inline">\(H_A: p\neq p_0\)</span>, <span class="math inline">\(H_A: p &gt; p_0\)</span>, or <span class="math inline">\(H_A: p &lt; p_0\)</span>. Since we want to test the proportion, it is natural to use the sample proportion as our test statistic.</p>
<p>Here, again, we want to simulate the null distribution. However, the procedure differs slightly from the mean and median one. This is because, for proportion, we cannot simply shift the distribution. Remember that the standard error of <span class="math inline">\(\hat{p}\)</span> is given by <span class="math inline">\(SE(\hat{p}) = \sqrt{\frac{p(1-p)}{n}}\)</span>, which depends on <span class="math inline">\(p\)</span>. So, it is not possible for us to shift the sample distribution without also affecting the standard error of the statistic.</p>
<p>However, in the case of proportions, we know that every element in our population can either be a 0 (indicating that they do not possess the attribute we are examining) or a 1 (indicating that they do possess the attribute). The challenge is that we do not know the exact proportion of each category. Essentially, it is like having a bar chart with one bar representing zeros and another for ones, but we simply do not know the height of each bar.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="1426" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1425;"><span id="cb6-1426"><a href="#cb6-1426" aria-hidden="true" tabindex="-1"></a>viewof p <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="fl">0.1</span><span class="op">,</span> <span class="fl">0.9</span>]<span class="op">,</span> {</span>
<span id="cb6-1427"><a href="#cb6-1427" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span></span>
<span id="cb6-1428"><a href="#cb6-1428" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb6-1429"><a href="#cb6-1429" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Population proportion"</span></span>
<span id="cb6-1430"><a href="#cb6-1430" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb6-1431"><a href="#cb6-1431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-1432"><a href="#cb6-1432" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb6-1433"><a href="#cb6-1433" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb6-1434"><a href="#cb6-1434" aria-hidden="true" tabindex="-1"></a>    <span class="dt">axis</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb6-1435"><a href="#cb6-1435" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]</span>
<span id="cb6-1436"><a href="#cb6-1436" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb6-1437"><a href="#cb6-1437" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb6-1438"><a href="#cb6-1438" aria-hidden="true" tabindex="-1"></a>    <span class="dt">ticks</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb6-1439"><a href="#cb6-1439" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickFormat</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">,</span></span>
<span id="cb6-1440"><a href="#cb6-1440" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="kw">null</span></span>
<span id="cb6-1441"><a href="#cb6-1441" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb6-1442"><a href="#cb6-1442" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb6-1443"><a href="#cb6-1443" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>([</span>
<span id="cb6-1444"><a href="#cb6-1444" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">category</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">proportion</span><span class="op">:</span> <span class="dv">1</span> <span class="op">-</span> p }<span class="op">,</span></span>
<span id="cb6-1445"><a href="#cb6-1445" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">category</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">proportion</span><span class="op">:</span> p }</span>
<span id="cb6-1446"><a href="#cb6-1446" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span> {</span>
<span id="cb6-1447"><a href="#cb6-1447" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"category"</span><span class="op">,</span></span>
<span id="cb6-1448"><a href="#cb6-1448" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"proportion"</span><span class="op">,</span></span>
<span id="cb6-1449"><a href="#cb6-1449" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"steelblue"</span></span>
<span id="cb6-1450"><a href="#cb6-1450" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb6-1451"><a href="#cb6-1451" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {</span>
<span id="cb6-1452"><a href="#cb6-1452" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span></span>
<span id="cb6-1453"><a href="#cb6-1453" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> [<span class="op">-</span><span class="fl">0.05</span><span class="op">,</span> <span class="op">-</span><span class="fl">0.05</span>]<span class="op">,</span></span>
<span id="cb6-1454"><a href="#cb6-1454" aria-hidden="true" tabindex="-1"></a>      <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">,</span></span>
<span id="cb6-1455"><a href="#cb6-1455" aria-hidden="true" tabindex="-1"></a>      <span class="dt">dy</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></span>
<span id="cb6-1456"><a href="#cb6-1456" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">16</span></span>
<span id="cb6-1457"><a href="#cb6-1457" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb6-1458"><a href="#cb6-1458" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>([<span class="st">"Population distribution"</span>]<span class="op">,</span> { <span class="co">// Title as a text mark</span></span>
<span id="cb6-1459"><a href="#cb6-1459" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> [<span class="fl">0.5</span>]<span class="op">,</span>          <span class="co">// Center horizontally (midpoint of 0 and 1)</span></span>
<span id="cb6-1460"><a href="#cb6-1460" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> [<span class="op">.</span><span class="dv">95</span>]<span class="op">,</span>         <span class="co">// Position at the top (slightly above 1)</span></span>
<span id="cb6-1461"><a href="#cb6-1461" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="co">// Make it bold</span></span>
<span id="cb6-1462"><a href="#cb6-1462" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">22</span><span class="op">,</span>       <span class="co">// Set font size</span></span>
<span id="cb6-1463"><a href="#cb6-1463" aria-hidden="true" tabindex="-1"></a>      <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"middle"</span> <span class="co">// Center the text horizontally</span></span>
<span id="cb6-1464"><a href="#cb6-1464" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb6-1465"><a href="#cb6-1465" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb6-1466"><a href="#cb6-1466" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>Luckily for us, <span class="math inline">\(H_0: p = p_0\)</span> tell us exactly the size of each of the bar if the null hypothesis were true. So, we know exactly what our population would look like under <span class="math inline">\(H_0\)</span>. Therefore, we can <code>draw</code> new values directly from the population under the null hypothesis, and we don’t need to resample from our sample.</p>
<div id="exm-obesity" class="theorem example">
<p><span class="theorem-title"><strong>Example 11</strong></span> According to the National Institute of Diabetes and Digestive and Kidney Diseases, <a href="https://www.niddk.nih.gov/health-information/health-statistics/overweight-obesity">approximately 42.5% of adults in the United States are classified as obese</a>. The new Health Secretary aims to launch a campaign that encourages Americans to adopt better eating habits and lead healthier lifestyles. As part of this initiative, a series of new policies has been implemented. After two years, the House of Representatives plans to evaluate the effectiveness of the program to determine if there has been any change in the obesity rate. They have surveyed a random sample of 300 adults, with the data available in the <code>obesity_study</code> variable. The objective is to test the hypothesis: <span class="math inline">\(H_0: p = 0.425\)</span> versus <span class="math inline">\(H_A: p \neq 0.425\)</span> at a <span class="math inline">\(5\%\)</span> significance level.</p>
<div class="cell" data-edit="false" data-autorun="true">
<div>
<div id="webr-19" class="exercise-cell">

</div>
<script type="webr-19-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOnRydWUsImVjaG8iOmZhbHNlLCJlZGl0IjpmYWxzZSwiZXZhbCI6dHJ1ZSwib3V0cHV0IjpmYWxzZX0sImNvZGUiOiJcbnNldC5zZWVkKDEpXG5vYmVzaXR5X3N0dWR5IDwtIHRpYmJsZShcbiAgaXNfb2Jlc2UgPSByYmlub20oMzAwLCBzaXplID0gMSwgcHJvYiA9IDAuNDApXG4pICU+JVxuICBtdXRhdGUoaXNfb2Jlc2UgPSBpZl9lbHNlKGlzX29iZXNlID09IDEsIFwieWVzXCIsIFwibm9cIikpXG5zYW1wbGVfcHJvcF9vYmVzZSA8LSBtZWFuKG9iZXNpdHlfc3R1ZHkkaXNfb2Jlc2UgPT0gXCJ5ZXNcIikifQ==
</script>
</div>
</div>
<div class="cell">
<div>
<div id="webr-20" class="exercise-cell">

</div>
<script type="webr-20-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgU2FtcGxlIGRhdGEgb2Jlc2l0eSBzdHVkeSAjXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xub2Jlc2l0eV9zdHVkeSBcblxuKHNhbXBsZV9wcm9wX29iZXNlIDwtIG1lYW4ob2Jlc2l0eV9zdHVkeSRpc19vYmVzZSA9PSBcInllc1wiKSkifQ==
</script>
</div>
</div>
<p>To test the hypotheses, we will use the sample proportion. Our next step is to generate value from the null model. But note that <span class="math inline">\(H_0\)</span> specifies what our population looks like. So, to “estimate” the null model, we can take multiple samples directly from this would-be population if <span class="math inline">\(H_0\)</span> were true. To sample from this distribution, we randomly select between <code>"yes"</code> or <code>"no"</code> with the probability of <code>"yes"</code> equals to <span class="math inline">\(p_0=0.425\)</span>.</p>
<div class="cell">
<div>
<div id="webr-21" class="exercise-cell">

</div>
<script type="webr-21-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBTdG9yaW5nIHRoZSB2YWx1ZXMgb2YgdGhlIHByb2JsZW0gI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuc2FtcGxlX3NpemUgPSAzMDBcbnJlcHMgPSAxMDAwMFxucDAgPSAwLjQyNVxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiMgTnVsbCBtb2RlbDogdHdvIHN0ZXBzICAgICAgICAgICAgICAgICAgICAgICAgI1xuIyAgIDEuIFRha2UgbXVsdGlwbGUgc2FtcGxlcyBmcm9tIHRoZSAgICAgICAgICAjXG4jICAgICAgdGhlb3JldGljYWwgcG9wdWxhdGlvbiAodW5kZXIgSDApOyAgICAgICNcbiMgICAyLiBDYWxjdWxhdGUgdGhlIHNhbXBsZSBwcm9wb3J0aW9uIG9mIGVhY2ggIyBcbiMgICAgICBzYW1wbGUgdG8gb2J0YWluIHRoZSBudWxsIG1vZGVsLiAgICAgICAgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5udWxsX21vZGVsX29iZXNpdHkgPC0gdGliYmxlKFxuICAgIHJlcGxpY2F0ZSA9IHJlcCgxOnJlcHMsIHNhbXBsZV9zaXplKSxcbiAgICBpc19vYmVzZSA9IHNhbXBsZShjKCd5ZXMnLCAnbm8nKSwgXG4gICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHNhbXBsZV9zaXplICogcmVwcyxcbiAgICAgICAgICAgICAgICAgICAgICBwcm9iID0gYyhwMCwgMS1wMCksXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZSA9IFRSVUUpXG4gICkgJT4lXG4gIGdyb3VwX2J5KHJlcGxpY2F0ZSkgJT4lXG4gIHN1bW1hcmlzZShzaW1fcGhhdCA9IG1lYW4oaXNfb2Jlc2UgPT0gJ3llcycpKVxuXG5udWxsX21vZGVsX29iZXNpdHkgIn0=
</script>
</div>
</div>
<p>Let’s examine the null model and the observed test statistics.</p>
<div class="cell">
<div>
<div id="webr-22" class="exercise-cell">

</div>
<script type="webr-22-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBQbG90IHRoZSBzaW11bGF0ZWQgbnVsbCBtb2RlbCBhbmQgI1xuIyB0aGUgb2JzZXJ2ZWQgdGVzdCBzdGF0aXN0aWMuICAgICAgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9vYmVzaXR5ICU+JVxuICBnZ3Bsb3QoKSArIFxuICBnZW9tX2hpc3RvZ3JhbShhZXMoeCA9IHNpbV9waGF0KSwgXG4gICAgICAgICAgICAgICAgIGZpbGwgPSAnc3RlZWxibHVlJywgXG4gICAgICAgICAgICAgICAgIGNvbG9yID0gJ3doaXRlJyxcbiAgICAgICAgICAgICAgICAgYmlucyA9IDE1KSArIFxuICBnZW9tX3ZsaW5lKHhpbnRlcmNlcHQgPSBzYW1wbGVfcHJvcF9vYmVzZSwgY29sb3IgPSAncmVkJykgKyBcbiAgZ2d0aXRsZSgnTnVsbCBNb2RlbCB2aWEgU2ltdWxhdGlvbicpICsgXG4gIHhsYWIoJ1NpbXVsYXRlZCBwcm9wb3J0aW9ucycpICsgXG4gIHRoZW1lX2J3KCkifQ==
</script>
</div>
</div>
<p>In the plot above, we can see that the test statistic is located on the left side. This means that our sample proportion of obese individuals, as <span class="math inline">\(\hat{p} = 0.37\)</span>, is smaller than the hypothesized proportion <span class="math inline">\(p_0 = 0.425\)</span>. To calculate the p-value, we determine the proportion of simulated statistics that fall below our <span class="math inline">\(\hat{p} = 0.37\)</span> and then multiply that proportion by <span class="math inline">\(2\)</span>.</p>
<div class="cell">
<div>
<div id="webr-23" class="exercise-cell">

</div>
<script type="webr-23-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjXG4jIEdldCBwLXZhbHVlICNcbiMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9vYmVzaXR5ICU+JSBcbiAgc3VtbWFyaXNlKHBfdmFsdWUgPSAyICogbWVhbihzaW1fcGhhdCA8PSBzYW1wbGVfcHJvcF9vYmVzZSkpIn0=
</script>
</div>
</div>
<p>Therefore, at a <span class="math inline">\(5\%\)</span> significance level, we fail to reject <span class="math inline">\(H_0\)</span>. The conclusion is :</p>
<blockquote class="blockquote">
<p>The House of Representatives doesn’t have enough evidence to reject the null hypothesis that the obesity proportion is <span class="math inline">\(42.5\%\)</span> in favour of <span class="math inline">\(H_A\)</span>, that the obesity proportion is different from <span class="math inline">\(42.5\%\)</span>.</p>
</blockquote>
<p>Finally, once again, the <code>infer</code> workflow makes our life much easier. Let us take a look.</p>
<div class="cell">
<div>
<div id="webr-24" class="exercise-cell">

</div>
<script type="webr-24-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbmZlciB3b3JrZmxvdzogZ2VuZXJhdGUgdGhlIG51bGwgbW9kZWwgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9vYmVzaXR5X2luZmVyIDwtIFxuICBvYmVzaXR5X3N0dWR5ICU+JVxuICBtdXRhdGUoaXNfb2Jlc2UgPSBpc19vYmVzZSkgJT4lXG4gIHNwZWNpZnkocmVzcG9uc2UgPSBpc19vYmVzZSwgc3VjY2VzcyA9ICd5ZXMnKSAlPiVcbiAgaHlwb3RoZXNpc2UobnVsbCA9ICdwb2ludCcsIHAgPSAwLjQyNSkgJT4lXG4gIGdlbmVyYXRlKHJlcHMgPSAxMDAwMCwgdHlwZSA9ICdkcmF3JykgJT4lXG4gIGNhbGN1bGF0ZShzdGF0ID0gJ3Byb3AnKSAifQ==
</script>
</div>
</div>
<p>There are two differences from the previous approach we used for the mean:</p>
<ol type="1">
<li>First, note that when we call <code>specify</code>, we must now define what is considered “success”. For this study we have <code>specify(response = is_obese, success = "yes")</code>.</li>
<li>Second, we need to specify that we want to generate from a theoretical population instead of resampling from the original sample. Therefore, in the <code>generate</code> function, we use <code>type = "draw"</code>.</li>
</ol>
<p>The code above generates values from the theoretical population distribution if <span class="math inline">\(H_0\)</span> were true. Next, we can calculate the p-value and visualize the test.</p>
<div class="cell">
<div>
<div id="webr-25" class="exercise-cell">

</div>
<script type="webr-25-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuIyBJbmZlciB3b3JrZmxvdzogdmlzdWFsaXplIHRlc3QgI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xubnVsbF9tb2RlbF9vYmVzaXR5X2luZmVyICU+JSBcbiAgdmlzdWFsaXplKCkgK1xuICBzaGFkZV9wdmFsdWUob2JzX3N0YXQgPSBzYW1wbGVfcHJvcF9vYmVzZSwgZGlyZWN0aW9uID0gJ2JvdGgnKVxuXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4jIEluZmVyIHdvcmtmbG93OiBnZXQgcC12YWx1ZSAjXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4ocF92YWx1ZV9vYmVzZV9pbmZlciA8LSBudWxsX21vZGVsX29iZXNpdHlfaW5mZXIgJT4lXG4gIGdldF9wX3ZhbHVlKG9ic19zdGF0PXNhbXBsZV9wcm9wX29iZXNlLCBkaXJlY3Rpb24gPSAnYm90aCcpKSJ9
</script>
</div>
</div>
</div>
</section>
</section>
<section id="two-populations" class="level3">
<h3 class="anchored" data-anchor-id="two-populations">Two populations</h3>
<p>Coming soon!!</p>
<section id="difference-in-means" class="level4">
<h4 class="anchored" data-anchor-id="difference-in-means">Difference in means</h4>
</section>
<section id="difference-in-proportions" class="level4">
<h4 class="anchored" data-anchor-id="difference-in-proportions">Difference in proportions</h4>
</section>
</section>
</section>
<section id="exercises-2" class="level2">
<h2 class="anchored" data-anchor-id="exercises-2">Exercises</h2>
<!--Supposed Tech Solutions in @exm-diff-prop-hypotheses wanted to see if the version B of the website yielded higher sign ups for free trial. Would $H_0$ and $H_A$ change? If yes, write the new hypotheses. -->
<!--Supposed the Green Thumb Gardens in @exm-diff-means-hypotheses wanted to see if the Fertilizer GrowFast yields at least 5 cm higher growth compared to the Fertilizer BloomBoost. How would the hypotheses look like in this scenario?-->
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-infer2021" class="csl-entry" role="listitem">
Couch, Simon P., Andrew P. Bray, Chester Ismay, Evgeni Chasnovski, Benjamin S. Baumer, and Mine Çetinkaya-Rundel. 2021. <span>“<span class="nocase">infer</span>: An <span>R</span> Package for Tidyverse-Friendly Statistical Inference.”</span> <em>Journal of Open Source Software</em> 6 (65): 3661. <a href="https://doi.org/10.21105/joss.03661">https://doi.org/10.21105/joss.03661</a>.
</div>
<div id="ref-thulin2024modern" class="csl-entry" role="listitem">
Thulin, M. 2024. <em>Modern Statistics with r</em>. Second Edition. Chapman &amp; Hall/CRC Press.
</div>
</div>


<script type="webr-data">
eyJvcHRpb25zIjp7ImJhc2VVcmwiOiJodHRwczovL3dlYnIuci13YXNtLm9yZy92MC40LjEvIn0sInBhY2thZ2VzIjp7InBrZ3MiOlsiZXZhbHVhdGUiLCJrbml0ciIsImh0bWx0b29scyIsInRpZHl2ZXJzZSIsImluZmVyIiwiYnJvb20iXSwicmVwb3MiOltdfSwicmVuZGVyX2RmIjoiZGVmYXVsdCJ9
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3siY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0yNSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjU7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0yNSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzI1ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMjUtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0yNS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8yNSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMjUsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0yNCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjQ7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0yNCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzI0ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMjQtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0yNC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8yNCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMjQsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0yMyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjM7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0yMyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzIzID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMjMtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0yMy1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8yMyA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMjMsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0yMiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjI7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0yMiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzIyID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMjItY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0yMi1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8yMiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMjIsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0yMSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjE7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0yMSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzIxID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMjEtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0yMS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8yMSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMjEsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0yMCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjA7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0yMCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzIwID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMjAtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0yMC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8yMCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMjAsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xOSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTk7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xOSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJfd2Vicl92YWx1ZV8xOSA9IHtcbiAgY29uc3QgeyBoaWdobGlnaHRSLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xOS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXZhbHVhdGlvbiBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBpZDogXCJ3ZWJyLTE5LWNvbnRlbnRzXCIsXG4gICAgZWNobzogdHJ1ZSxcbiAgICBvdXRwdXQ6IHRydWVcbiAgfSwgYmxvY2suYXR0cik7XG5cbiAgLy8gRXZhbHVhdGUgdGhlIHByb3ZpZGVkIFIgY29kZVxuICBjb25zdCByZXN1bHQgPSB3ZWJST2pzLnByb2Nlc3Moe2NvZGU6IGJsb2NrLmNvZGUsIG9wdGlvbnN9LCB7fSk7XG5cbiAgLy8gRWFybHkgeWllbGQgd2hpbGUgd2Ugd2FpdCBmb3IgdGhlIGZpcnN0IGV2YWx1YXRpb24gYW5kIHJlbmRlclxuICBpZiAob3B0aW9ucy5vdXRwdXQgJiYgIShcIjE5XCIgaW4gd2ViUk9qcy5yZW5kZXJlZE9qcykpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgaWYgKG9wdGlvbnMuZWNobykge1xuICAgICAgLy8gU2hvdyBvdXRwdXQgYXMgaGlnaGxpZ2h0ZWQgc291cmNlXG4gICAgICBjb25zdCBwcmVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGVcIjtcbiAgICAgIHByZUVsZW0uY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlIHJcIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoaGlnaGxpZ2h0UihibG9jay5jb2RlKSk7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ncm93IHNwaW5uZXItZ3Jvdy1zbSBtLTIgcG9zaXRpb24tYWJzb2x1dGUgdG9wLTAgZW5kLTBcIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJlRWxlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1zbVwiO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgIH1cblxuICAgIHlpZWxkIGNvbnRhaW5lcjtcbiAgfVxuXG4gIHdlYlJPanMucmVuZGVyZWRPanNbXCIxOVwiXSA9IHRydWU7XG4gIHlpZWxkIGF3YWl0IHJlc3VsdDtcbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xOCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTg7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xOCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE4ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTgtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xOC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xOCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTgsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xNyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTc7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xNyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE3ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTctY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xNy1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xNyA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTcsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xNiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTY7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xNiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE2ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTYtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xNi1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xNiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTYsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xNSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTU7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xNSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE1ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTUtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xNS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xNSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTUsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xNCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTQ7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xNCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzE0ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTQtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xNC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xNCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTQsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xMyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTM7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xMyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzEzID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTMtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xMy1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xMyA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTMsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xMiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTI7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xMiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzEyID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTItY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xMi1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xMiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTIsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xMSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTE7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xMSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJfd2Vicl92YWx1ZV8xMSA9IHtcbiAgY29uc3QgeyBoaWdobGlnaHRSLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXZhbHVhdGlvbiBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBpZDogXCJ3ZWJyLTExLWNvbnRlbnRzXCIsXG4gICAgZWNobzogdHJ1ZSxcbiAgICBvdXRwdXQ6IHRydWVcbiAgfSwgYmxvY2suYXR0cik7XG5cbiAgLy8gRXZhbHVhdGUgdGhlIHByb3ZpZGVkIFIgY29kZVxuICBjb25zdCByZXN1bHQgPSB3ZWJST2pzLnByb2Nlc3Moe2NvZGU6IGJsb2NrLmNvZGUsIG9wdGlvbnN9LCB7fSk7XG5cbiAgLy8gRWFybHkgeWllbGQgd2hpbGUgd2Ugd2FpdCBmb3IgdGhlIGZpcnN0IGV2YWx1YXRpb24gYW5kIHJlbmRlclxuICBpZiAob3B0aW9ucy5vdXRwdXQgJiYgIShcIjExXCIgaW4gd2ViUk9qcy5yZW5kZXJlZE9qcykpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgaWYgKG9wdGlvbnMuZWNobykge1xuICAgICAgLy8gU2hvdyBvdXRwdXQgYXMgaGlnaGxpZ2h0ZWQgc291cmNlXG4gICAgICBjb25zdCBwcmVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcInNvdXJjZUNvZGVcIjtcbiAgICAgIHByZUVsZW0uY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlIHJcIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoaGlnaGxpZ2h0UihibG9jay5jb2RlKSk7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ncm93IHNwaW5uZXItZ3Jvdy1zbSBtLTIgcG9zaXRpb24tYWJzb2x1dGUgdG9wLTAgZW5kLTBcIjtcbiAgICAgIHByZUVsZW0uYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJlRWxlbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwaW5uZXIuY2xhc3NOYW1lID0gXCJzcGlubmVyLWJvcmRlciBzcGlubmVyLWJvcmRlci1zbVwiO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgIH1cblxuICAgIHlpZWxkIGNvbnRhaW5lcjtcbiAgfVxuXG4gIHdlYlJPanMucmVuZGVyZWRPanNbXCIxMVwiXSA9IHRydWU7XG4gIHlpZWxkIGF3YWl0IHJlc3VsdDtcbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xMCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTA7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xMCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzEwID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTAtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici0xMC1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xMCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMTAsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC05IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV85O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIn0seyJjZWxsTmFtZSI6IndlYnItOSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzkgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici05LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItOS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV85ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl85LCB7fSk7XG4ifSx7ImNlbGxOYW1lIjoid2Vici13aWRnZXQtOCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfODtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLTgiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl84ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItOC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTgtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfOCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfOCwge30pO1xuIn0seyJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTciLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzc7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici03IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNyA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTctY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici03LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzcgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzcsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC02IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV82O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIn0seyJjZWxsTmFtZSI6IndlYnItNiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzYgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici02LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItNi1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV82ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl82LCB7fSk7XG4ifSx7ImNlbGxOYW1lIjoid2Vici13aWRnZXQtNSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLTUiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl81ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTUtY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfNSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfNSwge30pO1xuIn0seyJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTQiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzQ7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici00IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNCA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTQtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7IGlkOiBgd2Vici00LWNvbnRlbnRzYCB9LCBibG9jay5hdHRyKTtcbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl93ZWJyX3ZhbHVlXzQgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzQsIHt9KTtcbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0zIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zO1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIn0seyJjZWxsTmFtZSI6IndlYnItMyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzMgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItMy1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8zID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8zLCB7fSk7XG4ifSx7ImNlbGxOYW1lIjoid2Vici13aWRnZXQtMiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLTIiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl8yID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHsgaWQ6IGB3ZWJyLTItY29udGVudHNgIH0sIGJsb2NrLmF0dHIpO1xuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuXG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxuX3dlYnJfdmFsdWVfMiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMiwge30pO1xuIn0seyJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTEiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzE7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6Il93ZWJyX3ZhbHVlXzEgPSB7XG4gIGNvbnN0IHsgaGlnaGxpZ2h0UiwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXZhbHVhdGlvbiBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICBpZDogXCJ3ZWJyLTEtY29udGVudHNcIixcbiAgICBlY2hvOiB0cnVlLFxuICAgIG91dHB1dDogdHJ1ZVxuICB9LCBibG9jay5hdHRyKTtcblxuICAvLyBFdmFsdWF0ZSB0aGUgcHJvdmlkZWQgUiBjb2RlXG4gIGNvbnN0IHJlc3VsdCA9IHdlYlJPanMucHJvY2Vzcyh7Y29kZTogYmxvY2suY29kZSwgb3B0aW9uc30sIHt9KTtcblxuICAvLyBFYXJseSB5aWVsZCB3aGlsZSB3ZSB3YWl0IGZvciB0aGUgZmlyc3QgZXZhbHVhdGlvbiBhbmQgcmVuZGVyXG4gIGlmIChvcHRpb25zLm91dHB1dCAmJiAhKFwiMVwiIGluIHdlYlJPanMucmVuZGVyZWRPanMpKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGlmIChvcHRpb25zLmVjaG8pIHtcbiAgICAgIC8vIFNob3cgb3V0cHV0IGFzIGhpZ2hsaWdodGVkIHNvdXJjZVxuICAgICAgY29uc3QgcHJlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzb3VyY2VDb2RlXCI7XG4gICAgICBwcmVFbGVtLmNsYXNzTmFtZSA9IFwic291cmNlQ29kZSByXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKGhpZ2hsaWdodFIoYmxvY2suY29kZSkpO1xuICAgICAgc3Bpbm5lci5jbGFzc05hbWUgPSBcInNwaW5uZXItZ3JvdyBzcGlubmVyLWdyb3ctc20gbS0yIHBvc2l0aW9uLWFic29sdXRlIHRvcC0wIGVuZC0wXCI7XG4gICAgICBwcmVFbGVtLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHByZUVsZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lci1ib3JkZXIgc3Bpbm5lci1ib3JkZXItc21cIjtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGlubmVyKTtcbiAgICB9XG5cbiAgICB5aWVsZCBjb250YWluZXI7XG4gIH1cblxuICB3ZWJST2pzLnJlbmRlcmVkT2pzW1wiMVwiXSA9IHRydWU7XG4gIHlpZWxkIGF3YWl0IHJlc3VsdDtcbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXByZWx1ZGUiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ3ZWJST2pzID0ge1xuICBjb25zdCB7IFdlYlIgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWUuV2ViUjtcbiAgY29uc3Qge1xuICAgIFdlYlJFdmFsdWF0b3IsXG4gICAgV2ViUkVudmlyb25tZW50TWFuYWdlcixcbiAgICBzZXR1cFIsXG4gICAgYjY0RGVjb2RlLFxuICAgIGNvbGxhcHNlUGF0aFxuICB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcblxuICBjb25zdCBzdGF0dXNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV4ZXJjaXNlLWxvYWRpbmctc3RhdHVzXCIpO1xuICBjb25zdCBpbmRpY2F0b3JDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImV4ZXJjaXNlLWxvYWRpbmctaW5kaWNhdG9yXCIpO1xuICBpbmRpY2F0b3JDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImQtbm9uZVwiKTtcblxuICBsZXQgc3RhdHVzVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgc3RhdHVzVGV4dC5jbGFzc0xpc3QgPSBcImV4ZXJjaXNlLWxvYWRpbmctZGV0YWlsc1wiO1xuICBzdGF0dXNUZXh0ID0gc3RhdHVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXR1c1RleHQpO1xuICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYEluaXRpYWxpc2VgO1xuXG4gIC8vIEhvaXN0IGluZGljYXRvciBvdXQgZnJvbSBmaW5hbCBzbGlkZSB3aGVuIHJ1bm5pbmcgdW5kZXIgcmV2ZWFsXG4gIGNvbnN0IHJldmVhbFN0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2ZWFsIC5leGVyY2lzZS1sb2FkaW5nLWluZGljYXRvclwiKTtcbiAgaWYgKHJldmVhbFN0YXR1cykge1xuICAgIHJldmVhbFN0YXR1cy5yZW1vdmUoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJldmVhbCA+IC5zbGlkZXNcIikuYXBwZW5kQ2hpbGQocmV2ZWFsU3RhdHVzKTtcbiAgfVxuXG4gIC8vIE1ha2UgYW55IHJldmVhbCBzbGlkZXMgd2l0aCBsaXZlIGNlbGxzIHNjcm9sbGFibGVcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5yZXZlYWwgLmV4ZXJjaXNlLWNlbGxcIikuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBlbC5jbG9zZXN0KCdzZWN0aW9uLnNsaWRlJykuY2xhc3NMaXN0LmFkZChcInNjcm9sbGFibGVcIik7XG4gIH0pXG5cbiAgLy8gd2ViUiBzdXBwbGVtZW50YWwgZGF0YSBhbmQgb3B0aW9uc1xuICBjb25zdCBkYXRhQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLWRhdGFcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShiNjREZWNvZGUoZGF0YUNvbnRlbnQpKTtcblxuICAvLyBHcmFiIGxpc3Qgb2YgcmVzb3VyY2VzIHRvIGJlIGRvd25sb2FkZWRcbiAgY29uc3QgZmlsZXNDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcInZmcy1maWxlXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgZmlsZXMgPSBKU09OLnBhcnNlKGI2NERlY29kZShmaWxlc0NvbnRlbnQpKTtcblxuICAvLyBJbml0aWFsaXNlIHdlYlIgYW5kIHNldHVwIGZvciBSIGNvZGUgZXZhbHVhdGlvblxuICBsZXQgd2ViUlByb21pc2UgPSAoYXN5bmMgKHdlYlIpID0+IHtcbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYERvd25sb2FkaW5nIHdlYlJgO1xuICAgIGF3YWl0IHdlYlIuaW5pdCgpO1xuXG4gICAgLy8gSW5zdGFsbCBwcm92aWRlZCBsaXN0IG9mIHBhY2thZ2VzXG4gICAgLy8gRW5zdXJlIHdlYlIgZGVmYXVsdCByZXBvIGlzIGluY2x1ZGVkXG4gICAgZGF0YS5wYWNrYWdlcy5yZXBvcy5wdXNoKFwiaHR0cHM6Ly9yZXBvLnItd2FzbS5vcmdcIilcbiAgICBhd2FpdCBkYXRhLnBhY2thZ2VzLnBrZ3MubWFwKChwa2cpID0+ICgpID0+IHtcbiAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgcGFja2FnZTogJHtwa2d9YDtcbiAgICAgIHJldHVybiB3ZWJSLmV2YWxSVm9pZChgXG4gICAgICAgIHdlYnI6Omluc3RhbGwocGtnLCByZXBvcyA9IHJlcG9zKVxuICAgICAgICBsaWJyYXJ5KHBrZywgY2hhcmFjdGVyLm9ubHkgPSBUUlVFKVxuICAgICAgYCwgeyBlbnY6IHtcbiAgICAgICAgcGtnOiBwa2csXG4gICAgICAgIHJlcG9zOiBkYXRhLnBhY2thZ2VzLnJlcG9zLFxuICAgICAgfX0pO1xuICAgIH0pLnJlZHVjZSgoY3VyLCBuZXh0KSA9PiBjdXIudGhlbihuZXh0KSwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuXG4gICAgLy8gRG93bmxvYWQgYW5kIGluc3RhbGwgcmVzb3VyY2VzXG4gICAgYXdhaXQgZmlsZXMubWFwKChmaWxlKSA9PiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBuYW1lID0gZmlsZS5zdWJzdHJpbmcoZmlsZS5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gICAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYERvd25sb2FkaW5nIHJlc291cmNlOiAke25hbWV9YDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZmlsZSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgZG93bmxvYWQgXFxgJHtmaWxlfVxcYC4gRXJyb3IgJHtyZXNwb25zZS5zdGF0dXN9OiBcIiR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1cIi5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuXG4gICAgICAvLyBTdG9yZSBVUkxzIGluIHRoZSBjd2Qgd2l0aG91dCBhbnkgc3ViZGlyZWN0b3J5IHN0cnVjdHVyZVxuICAgICAgaWYgKGZpbGUuaW5jbHVkZXMoXCI6Ly9cIikpIHtcbiAgICAgICAgZmlsZSA9IG5hbWU7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbGxhcHNlIGhpZ2hlciBkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgICBmaWxlID0gY29sbGFwc2VQYXRoKGZpbGUpO1xuXG4gICAgICAvLyBDcmVhdGUgZGlyZWN0b3J5IHRyZWUsIGlnbm9yaW5nIFwiZGlyZWN0b3J5IGV4aXN0c1wiIFZGUyBlcnJvcnNcbiAgICAgIGNvbnN0IHBhcnRzID0gZmlsZS5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKTtcbiAgICAgIGxldCBwYXRoID0gJyc7XG4gICAgICB3aGlsZSAocGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXRoICs9IHBhcnRzLnNoaWZ0KCkgKyAnLyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgd2ViUi5GUy5ta2RpcihwYXRoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmICghZS5tZXNzYWdlLmluY2x1ZGVzKFwiRlMgZXJyb3JcIikpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFdyaXRlIHRoaXMgZmlsZSB0byB0aGUgVkZTXG4gICAgICByZXR1cm4gYXdhaXQgd2ViUi5GUy53cml0ZUZpbGUoZmlsZSwgbmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xuICAgIH0pLnJlZHVjZSgoY3VyLCBuZXh0KSA9PiBjdXIudGhlbihuZXh0KSwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuXG4gICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBJbnN0YWxsaW5nIHdlYlIgc2hpbXNgO1xuICAgIGF3YWl0IHdlYlIuZXZhbFJWb2lkKGB3ZWJyOjpzaGltX2luc3RhbGwoKWApO1xuXG4gICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBXZWJSIGVudmlyb25tZW50IHNldHVwYDtcbiAgICBhd2FpdCBzZXR1cFIod2ViUiwgZGF0YSk7XG5cbiAgICBzdGF0dXNUZXh0LnJlbW92ZSgpO1xuICAgIGlmIChzdGF0dXNDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoID09IDApIHtcbiAgICAgIHN0YXR1c0NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gd2ViUjtcbiAgfSkobmV3IFdlYlIoZGF0YS5vcHRpb25zKSk7XG5cbiAgLy8gS2VlcCB0cmFjayBvZiBpbml0aWFsIE9KUyBibG9jayByZW5kZXJcbiAgY29uc3QgcmVuZGVyZWRPanMgPSB7fTtcblxuICBjb25zdCBwcm9jZXNzID0gYXN5bmMgKGNvbnRleHQsIGlucHV0cykgPT4ge1xuICAgIGNvbnN0IHdlYlIgPSBhd2FpdCB3ZWJSUHJvbWlzZTtcbiAgICBjb25zdCBldmFsdWF0b3IgPSBuZXcgV2ViUkV2YWx1YXRvcih3ZWJSLCBjb250ZXh0KVxuICAgIGF3YWl0IGV2YWx1YXRvci5wcm9jZXNzKGlucHV0cyk7XG4gICAgcmV0dXJuIGV2YWx1YXRvci5jb250YWluZXI7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHByb2Nlc3MsXG4gICAgd2ViUlByb21pc2UsXG4gICAgcmVuZGVyZWRPanMsXG4gIH07XG59XG4ifV19
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script>
</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ilxudmlld29mIHAwID0gSW5wdXRzLnJhbmdlKFswLjQsIDAuNl0sIHtcbiAgc3RlcDogMC4wMSxcbiAgdmFsdWU6IDAuNixcbiAgbGFiZWw6IFwiTnVsbCBoeXBvdGhlc2lzIHByb3BvcnRpb24gKHDigoApXCJcbn0pXG5cblBsb3QucGxvdCh7XG4gIHk6IHtcbiAgICBkb21haW46IFswLCA0XVxuICB9LFxuICBtYXJrczogW1xuICAgIFBsb3QubGluZShcbiAgICAgIGQzLnJhbmdlKDAsIDEsIDAuMDAxKS5tYXAocCA9PiAoe1xuICAgICAgICBwLFxuICAgICAgICBkZW5zaXR5OiBNYXRoLmV4cCgtTWF0aC5wb3coKHAgLSBwMCksIDIpIC8gKDIgKiAocDAgKiAoMSAtIHAwKSAvIDUwKSkpIC9cbiAgICAgICAgICAgICAgICBNYXRoLnNxcnQoMiAqIE1hdGguUEkgKiAocDAgKiAoMSAtIHAwKSAvIDUwKSlcbiAgICAgIH0pKSxcbiAgICAgIHtcbiAgICAgICAgeDogXCJwXCIsXG4gICAgICAgIHk6IFwiZGVuc2l0eVwiXG4gICAgICB9XG4gICAgKSxcbiAgICBQbG90LnJ1bGVZKFswXSlcbiAgXSxcbiAgZ3JpZDogdHJ1ZSxcbiAgd2lkdGg6IDY0MCxcbiAgaGVpZ2h0OiA0MDAsXG4gIHg6IHtcbiAgICBsYWJlbDogXCJTYW1wbGUgUHJvcG9ydGlvblwiXG4gIH0sXG4gIHk6IHtcbiAgICBsYWJlbDogXCJEZW5zaXR5XCJcbiAgfVxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBwaGF0ID0gSW5wdXRzLnJhbmdlKFswLCAxXSwge1xuICBzdGVwOiAwLjAxLFxuICB2YWx1ZTogMC41LFxuICBsYWJlbDogdGV4YFxcaGF0e3B9YFxufSk7XG5cblBsb3QucGxvdCh7XG4gIHN0eWxlOiB7XG4gICAgZm9udFNpemU6IFwiMTRweFwiXG4gIH0sXG4gIHk6IHtcbiAgICBkb21haW46IFswLCA0XVxuICB9LFxuICBtYXJnaW5Cb3R0b206IDYwLCAgLy8gT25seSBpbmNyZWFzZSBib3R0b20gbWFyZ2luIGZvciB4LWF4aXMgbGFiZWxcbiAgbWFya3M6IFtcbiAgICBQbG90LmxpbmUoXG4gICAgICBkMy5yYW5nZSgwLCAxLCAwLjAwMSkubWFwKHAgPT4gKHtcbiAgICAgICAgcCxcbiAgICAgICAgZGVuc2l0eTogTWF0aC5leHAoLU1hdGgucG93KChwIC0gMC42KSwgMikgLyAoMiAqICgwLjYgKiAoMSAtIDAuNikgLyA1MCkpKSAvXG4gICAgICAgICAgICAgICAgTWF0aC5zcXJ0KDIgKiBNYXRoLlBJICogKDAuNiAqICgxIC0gMC42KSAvIDUwKSlcbiAgICAgIH0pKSxcbiAgICAgIHtcbiAgICAgICAgeDogXCJwXCIsXG4gICAgICAgIHk6IFwiZGVuc2l0eVwiLFxuICAgICAgICBzdHJva2U6IFwiYmxhY2tcIlxuICAgICAgfVxuICAgICksXG4gICAgUGxvdC5ydWxlWShbMF0pLFxuICAgIFBsb3QucnVsZVgoW3BoYXRdLCB7IHN0cm9rZTogcGhhdCA8IDAuNzIgPyBcIiMyZTdkMzJcIiA6IFwicmVkXCIsIHN0cm9rZVdpZHRoOiAyIH0pLFxuICAgIFBsb3QudGV4dChcbiAgICAgIFt7eDogMC4yLCB5OiAzLjgsIHRleHQ6IHBoYXQgPj0gMC43MiA/IFwiZXZpZGVuY2U6IHN0cm9uZ1wiIDogXCJldmlkZW5jZTogd2Vha1wifV0sXG4gICAgICB7XG4gICAgICAgIHg6IFwieFwiLFxuICAgICAgICB5OiBcInlcIixcbiAgICAgICAgdGV4dDogXCJ0ZXh0XCIsXG4gICAgICAgIGZpbGw6IHBoYXQgPj0gMC43MiA/IFwicmVkXCIgOiBcIiMyZTdkMzJcIixcbiAgICAgICAgZm9udFNpemU6IDE4XG4gICAgICB9XG4gICAgKVxuICBdLFxuICBncmlkOiB0cnVlLFxuICB3aWR0aDogNjQwLFxuICBoZWlnaHQ6IDQ0MCxcbiAgeDoge1xuICAgIGxhYmVsOiBcIlNhbXBsZSBQcm9wb3J0aW9uXCIsXG4gICAgbGFiZWxPZmZzZXQ6IDQwXG4gIH0sXG4gIHk6IHtcbiAgICBsYWJlbDogXCJEZW5zaXR5XCJcbiAgfVxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxuLy8gR2VuZXJhdGUgZml4ZWQgc2ltdWxhdGVkIGRhdGFcbnNpbXVsYXRlZERhdGEgPSB7XG4gIGZ1bmN0aW9uIGdldFJhbmRvbU51bWJlcihtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW47XG4gIH1cbiAgY29uc3QgbiA9IDIwMDA7XG4gIGNvbnN0IGRhdGEgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICBjb25zdCB1MSA9IGdldFJhbmRvbU51bWJlcigwLDEpO1xuICAgIGNvbnN0IHUyID0gZ2V0UmFuZG9tTnVtYmVyKDAsMSk7XG4gICAgY29uc3QgeiA9IE1hdGguc3FydCgtMiAqIE1hdGgubG9nKHUxKSkgKiBNYXRoLmNvcygyICogTWF0aC5QSSAqIHUyKTtcbiAgICBkYXRhLnB1c2goeik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ2aWV3b2Ygc3RhdGlzdGljX2xlZnRfdGFpbCA9IHtcbiAgY29uc3QgaW5wdXQgPSBJbnB1dHMucmFuZ2UoWy00LCA0XSwge1xuICAgIHN0ZXA6IDAuMSxcbiAgICB2YWx1ZTogMCxcbiAgICBsYWJlbDogXCJUZXN0IFN0YXRpc3RpY1wiXG4gIH0pO1xuICBcbiAgZDMuc2VsZWN0KGlucHV0KS5zZWxlY3QoJ2lucHV0W3R5cGU9XCJudW1iZXJcIl0nKS5zdHlsZShcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuXG4gIHJldHVybiBpbnB1dFxufVxuXG4vLyBDcmVhdGUgaGlzdG9ncmFtIGRhdGFcbmhpc3RvZ3JhbV9kYXRhX2xlZnRfdGFpbCA9IGQzLmJpbigpXG4gIC5kb21haW4oWy00LCA0XSlcbiAgLnRocmVzaG9sZHMoMjApXG4gIChzaW11bGF0ZWREYXRhKVxuICAubWFwKGJpbiA9PiAoe1xuICAgIHgwOiBiaW4ueDAsXG4gICAgeDE6IGJpbi54MSxcbiAgICBjb3VudDogYmluLmxlbmd0aFxuICB9KSk7XG5cbntcbiAgY29uc3QgY2hhcnRXaWR0aCA9IDY0MDtcbiAgY29uc3QgY2hhcnRIZWlnaHQgPSA0NDA7XG4gIGNvbnN0IG1hcmdpbkJvdHRvbSA9IDYwO1xuICBjb25zdCBtYXJnaW5MZWZ0ID0gNjA7XG4gIGNvbnN0IG1hcmdpblJpZ2h0ID0gMTIwO1xuICBjb25zdCBtYXJnaW5Ub3AgPSA0MDtcblxuICBjb25zdCB4ID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgIC5kb21haW4oWy00LCA0XSlcbiAgICAucmFuZ2UoW21hcmdpbkxlZnQsIGNoYXJ0V2lkdGggLSBtYXJnaW5SaWdodF0pO1xuXG4gIGNvbnN0IHkgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgLmRvbWFpbihbMCwgZDMubWF4KGhpc3RvZ3JhbV9kYXRhX2xlZnRfdGFpbCwgZCA9PiBkLmNvdW50KV0pXG4gICAgLnJhbmdlKFtjaGFydEhlaWdodCAtIG1hcmdpbkJvdHRvbSwgbWFyZ2luVG9wXSk7XG5cbiAgY29uc3Qgc3ZnID0gZDMuY3JlYXRlKFwic3ZnXCIpXG4gICAgICAuYXR0cihcIndpZHRoXCIsIGNoYXJ0V2lkdGgpXG4gICAgICAuYXR0cihcImhlaWdodFwiLCBjaGFydEhlaWdodCk7XG5cbiAgLy8gQWRkIHRpdGxlXG4gIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAuYXR0cihcInhcIiwgY2hhcnRXaWR0aCAvIDIpXG4gICAgICAuYXR0cihcInlcIiwgMjUpXG4gICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgICAvLy5zdHlsZShcImZvbnQtc2l6ZVwiLCBcIjIwcHhcIilcbiAgICAgIC8vLnN0eWxlKFwiZm9udC13ZWlnaHRcIiwgXCJib2xkXCIpXG4gICAgICAudGV4dChcInAtdmFsdWUgcmVnaW9uIGZvciBhIGxlZnQtdGFpbGVkIHRlc3RcIik7XG5cbiAgLy8gQWRkIFggYXhpcyB3aXRob3V0IG51bWJlcnNcbiAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoMCwgJHtjaGFydEhlaWdodCAtIG1hcmdpbkJvdHRvbX0pYClcbiAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeCkudGlja0Zvcm1hdChcIlwiKSk7XG5cbiAgLy8gQWRkIGN1c3RvbSB0aWNrIGZvciBvYnNlcnZlZCB0ZXN0IHN0YXRpc3RpY1xuICBzdmcuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgLmF0dHIoXCJ4XCIsIHgoc3RhdGlzdGljX2xlZnRfdGFpbCkpXG4gICAgICAuYXR0cihcInlcIiwgY2hhcnRIZWlnaHQgLSBtYXJnaW5Cb3R0b20gKyAyMClcbiAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgIC50ZXh0KFwiT2JzZXJ2ZWQgVGVzdCBTdGF0aXN0aWNcIik7XG5cbiAgLy8gQWRkIFggYXhpcyBsYWJlbFxuICBzdmcuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgke2NoYXJ0V2lkdGggLyAyfSwgJHtjaGFydEhlaWdodCAtIDIwfSlgKVxuICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgIC50ZXh0KFwiVGVzdCBTdGF0aXN0aWNcIik7XG5cbiAgLy8gQWRkIFkgYXhpcyB3aXRob3V0IG51bWJlcnNcbiAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoJHttYXJnaW5MZWZ0fSwgMClgKVxuICAgICAgLmNhbGwoZDMuYXhpc0xlZnQoeSkudGlja0Zvcm1hdChcIlwiKSk7XG5cbiAgLy8gQWRkIFkgYXhpcyBsYWJlbFxuICBzdmcuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoLTkwKVwiKVxuICAgICAgLmF0dHIoXCJ5XCIsIDApXG4gICAgICAuYXR0cihcInhcIiwgMCAtIChjaGFydEhlaWdodCAvIDIpKVxuICAgICAgLmF0dHIoXCJkeVwiLCBcIjFlbVwiKVxuICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgIC50ZXh0KFwiQ291bnRcIik7XG5cbiAgLy8gU3RlZWxibHVlIHBhcnQgb2YgdGhlIGJhcnMgKG5vdyBmb3IgdmFsdWVzIGdyZWF0ZXIgdGhhbiBzdGF0aXN0aWMpXG4gIHN2Zy5zZWxlY3RBbGwoXCIuc3RlZWxibHVlLWJhclwiKVxuICAgIC5kYXRhKGhpc3RvZ3JhbV9kYXRhX2xlZnRfdGFpbClcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoXCJyZWN0XCIpXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcInN0ZWVsYmx1ZS1iYXJcIilcbiAgICAuYXR0cihcInhcIiwgZCA9PiB4KE1hdGgubWF4KGQueDAsIHN0YXRpc3RpY19sZWZ0X3RhaWwpKSlcbiAgICAuYXR0cihcInlcIiwgZCA9PiB5KGQuY291bnQpKVxuICAgIC5hdHRyKFwid2lkdGhcIiwgZCA9PiBNYXRoLm1heCgwLCB4KGQueDEpIC0geChNYXRoLm1heChkLngwLCBzdGF0aXN0aWNfbGVmdF90YWlsKSkpKVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGQgPT4gY2hhcnRIZWlnaHQgLSBtYXJnaW5Cb3R0b20gLSB5KGQuY291bnQpKVxuICAgIC5hdHRyKFwiZmlsbFwiLCBcInN0ZWVsYmx1ZVwiKVxuICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwid2hpdGVcIik7XG5cbiAgLy8gUmVkIHBhcnQgb2YgdGhlIGJhcnMgKG5vdyBmb3IgdmFsdWVzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBzdGF0aXN0aWMpXG4gIHN2Zy5zZWxlY3RBbGwoXCIucmVkLWJhclwiKVxuICAgIC5kYXRhKGhpc3RvZ3JhbV9kYXRhX2xlZnRfdGFpbClcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoXCJyZWN0XCIpXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcInJlZC1iYXJcIilcbiAgICAuYXR0cihcInhcIiwgZCA9PiB4KGQueDApKVxuICAgIC5hdHRyKFwieVwiLCBkID0+IHkoZC5jb3VudCkpXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCBkID0+IE1hdGgubWF4KDAsIHgoTWF0aC5taW4oZC54MSwgc3RhdGlzdGljX2xlZnRfdGFpbCkpIC0geChkLngwKSkpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgZCA9PiBjaGFydEhlaWdodCAtIG1hcmdpbkJvdHRvbSAtIHkoZC5jb3VudCkpXG4gICAgLmF0dHIoXCJmaWxsXCIsIFwicmVkXCIpXG4gICAgLmF0dHIoXCJzdHJva2VcIiwgXCJ3aGl0ZVwiKTtcblxuICBzdmcuYXBwZW5kKFwibGluZVwiKVxuICAgICAgLmF0dHIoXCJ4MVwiLCB4KHN0YXRpc3RpY19sZWZ0X3RhaWwpKVxuICAgICAgLmF0dHIoXCJ4MlwiLCB4KHN0YXRpc3RpY19sZWZ0X3RhaWwpKVxuICAgICAgLmF0dHIoXCJ5MVwiLCB5KDApKVxuICAgICAgLmF0dHIoXCJ5MlwiLCB5KGQzLm1heChoaXN0b2dyYW1fZGF0YV9sZWZ0X3RhaWwsIGQgPT4gZC5jb3VudCkpKVxuICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJyZWRcIilcbiAgICAgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIDIpO1xuXG4gIC8vIENhbGN1bGF0ZSBhbmQgZGlzcGxheSBwLXZhbHVlIChjaGFuZ2VkIHRvIGxlZnQtdGFpbClcbiAgY29uc3QgcF92YWx1ZSA9IGhpc3RvZ3JhbV9kYXRhX2xlZnRfdGFpbC5maWx0ZXIoZCA9PiBkLngxIDw9IHN0YXRpc3RpY19sZWZ0X3RhaWwpXG4gICAgLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBkLmNvdW50LCAwKSAvIGQzLnN1bShoaXN0b2dyYW1fZGF0YV9sZWZ0X3RhaWwsIGQgPT4gZC5jb3VudCk7XG5cbiAgLy8gTW92ZWQgcC12YWx1ZSB0ZXh0IGxlZnQgYW5kIHVwXG4gIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAuYXR0cihcInhcIiwgY2hhcnRXaWR0aCAtIG1hcmdpblJpZ2h0IC0gMjApXG4gICAgICAuYXR0cihcInlcIiwgY2hhcnRIZWlnaHQgLyAzKVxuICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJzdGFydFwiKVxuICAgICAgLnRleHQoYHAtdmFsdWU6ICR7cF92YWx1ZS50b0ZpeGVkKDMpfWApO1xuXG4gIHJldHVybiBzdmcubm9kZSgpO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC01IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIHN0YXRpc3RpYyA9IHtcbiAgY29uc3QgaW5wdXQgPSBJbnB1dHMucmFuZ2UoWy00LCA0XSwge1xuICAgIHN0ZXA6IDAuMSxcbiAgICB2YWx1ZTogMCxcbiAgICBsYWJlbDogXCJUZXN0IFN0YXRpc3RpY1wiXG4gIH0pO1xuICBcbiAgZDMuc2VsZWN0KGlucHV0KS5zZWxlY3QoJ2lucHV0W3R5cGU9XCJudW1iZXJcIl0nKS5zdHlsZShcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuXG4gIHJldHVybiBpbnB1dFxufVxuXG4vLyBDcmVhdGUgaGlzdG9ncmFtIGRhdGFcbmhpc3RvZ3JhbV9kYXRhX3JpZ2h0X3RhaWxlZCA9IGQzLmJpbigpXG4gIC5kb21haW4oWy00LCA0XSlcbiAgLnRocmVzaG9sZHMoMjApXG4gIChzaW11bGF0ZWREYXRhKVxuICAubWFwKGJpbiA9PiAoe1xuICAgIHgwOiBiaW4ueDAsXG4gICAgeDE6IGJpbi54MSxcbiAgICBjb3VudDogYmluLmxlbmd0aFxuICB9KSk7XG5cbntcbiAgY29uc3QgY2hhcnRXaWR0aCA9IDY0MDtcbiAgY29uc3QgY2hhcnRIZWlnaHQgPSA0NDA7XG4gIGNvbnN0IG1hcmdpbkJvdHRvbSA9IDYwO1xuICBjb25zdCBtYXJnaW5MZWZ0ID0gNjA7XG4gIGNvbnN0IG1hcmdpblJpZ2h0ID0gMTIwO1xuICBjb25zdCBtYXJnaW5Ub3AgPSA0MDsgIC8vIEFkZGVkIG1hcmdpbiB0b3BcblxuICBjb25zdCB4ID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgIC5kb21haW4oWy00LCA0XSlcbiAgICAucmFuZ2UoW21hcmdpbkxlZnQsIGNoYXJ0V2lkdGggLSBtYXJnaW5SaWdodF0pO1xuXG4gIGNvbnN0IHkgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgLmRvbWFpbihbMCwgZDMubWF4KGhpc3RvZ3JhbV9kYXRhX3JpZ2h0X3RhaWxlZCwgZCA9PiBkLmNvdW50KV0pXG4gICAgLnJhbmdlKFtjaGFydEhlaWdodCAtIG1hcmdpbkJvdHRvbSwgbWFyZ2luVG9wXSk7ICAvLyBVcGRhdGVkIHRvIGFjY291bnQgZm9yIHRvcCBtYXJnaW5cblxuICBjb25zdCBzdmcgPSBkMy5jcmVhdGUoXCJzdmdcIilcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgY2hhcnRXaWR0aClcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGNoYXJ0SGVpZ2h0KTtcblxuICAvLyBBZGQgdGl0bGVcbiAgc3ZnLmFwcGVuZChcInRleHRcIilcbiAgICAgIC5hdHRyKFwieFwiLCBjaGFydFdpZHRoIC8gMilcbiAgICAgIC5hdHRyKFwieVwiLCAyNSlcbiAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgIC5zdHlsZShcImZvbnQtc2l6ZVwiLCBcIjE2cHhcIilcbiAgICAgIC50ZXh0KFwicC12YWx1ZSByZWdpb24gZm9yIGEgcmlnaHQtdGFpbGVkIHRlc3RcIik7XG5cbiAgLy8gQWRkIFggYXhpcyB3aXRob3V0IG51bWJlcnNcbiAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoMCwgJHtjaGFydEhlaWdodCAtIG1hcmdpbkJvdHRvbX0pYClcbiAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeCkudGlja0Zvcm1hdChcIlwiKSk7XG5cbiAgLy8gQWRkIGN1c3RvbSB0aWNrIGZvciBvYnNlcnZlZCB0ZXN0IHN0YXRpc3RpY1xuICBzdmcuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgLmF0dHIoXCJ4XCIsIHgoc3RhdGlzdGljKSlcbiAgICAgIC5hdHRyKFwieVwiLCBjaGFydEhlaWdodCAtIG1hcmdpbkJvdHRvbSArIDIwKVxuICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgLnRleHQoXCJPYnNlcnZlZCBUZXN0IFN0YXRpc3RpY1wiKTtcblxuICAvLyBBZGQgWCBheGlzIGxhYmVsXG4gIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKCR7Y2hhcnRXaWR0aCAvIDJ9LCAke2NoYXJ0SGVpZ2h0IC0gMjB9KWApXG4gICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgLnRleHQoXCJUZXN0IFN0YXRpc3RpY1wiKTtcblxuICAvLyBBZGQgWSBheGlzIHdpdGhvdXQgbnVtYmVyc1xuICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgke21hcmdpbkxlZnR9LCAwKWApXG4gICAgICAuY2FsbChkMy5heGlzTGVmdCh5KS50aWNrRm9ybWF0KFwiXCIpKTtcblxuICAvLyBBZGQgWSBheGlzIGxhYmVsXG4gIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgtOTApXCIpXG4gICAgICAuYXR0cihcInlcIiwgMClcbiAgICAgIC5hdHRyKFwieFwiLCAwIC0gKGNoYXJ0SGVpZ2h0IC8gMikpXG4gICAgICAuYXR0cihcImR5XCIsIFwiMWVtXCIpXG4gICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgLnRleHQoXCJDb3VudFwiKTtcblxuICAvLyBHcmF5IHBhcnQgb2YgdGhlIGJhcnNcbiAgc3ZnLnNlbGVjdEFsbChcIi5ncmF5LWJhclwiKVxuICAgIC5kYXRhKGhpc3RvZ3JhbV9kYXRhX3JpZ2h0X3RhaWxlZClcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoXCJyZWN0XCIpXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcImdyYXktYmFyXCIpXG4gICAgLmF0dHIoXCJ4XCIsIGQgPT4geChkLngwKSlcbiAgICAuYXR0cihcInlcIiwgZCA9PiB5KGQuY291bnQpKVxuICAgIC5hdHRyKFwid2lkdGhcIiwgZCA9PiBNYXRoLm1heCgwLCB4KE1hdGgubWluKGQueDEsIHN0YXRpc3RpYykpIC0geChkLngwKSkpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgZCA9PiBjaGFydEhlaWdodCAtIG1hcmdpbkJvdHRvbSAtIHkoZC5jb3VudCkpXG4gICAgLmF0dHIoXCJmaWxsXCIsIFwic3RlZWxibHVlXCIpXG4gICAgLmF0dHIoXCJzdHJva2VcIiwgXCJ3aGl0ZVwiKTtcblxuICAvLyBSZWQgcGFydCBvZiB0aGUgYmFyc1xuICBzdmcuc2VsZWN0QWxsKFwiLnJlZC1iYXJcIilcbiAgICAuZGF0YShoaXN0b2dyYW1fZGF0YV9yaWdodF90YWlsZWQpXG4gICAgLmVudGVyKClcbiAgICAuYXBwZW5kKFwicmVjdFwiKVxuICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJyZWQtYmFyXCIpXG4gICAgLmF0dHIoXCJ4XCIsIGQgPT4geChNYXRoLm1heChkLngwLCBzdGF0aXN0aWMpKSlcbiAgICAuYXR0cihcInlcIiwgZCA9PiB5KGQuY291bnQpKVxuICAgIC5hdHRyKFwid2lkdGhcIiwgZCA9PiBNYXRoLm1heCgwLCB4KGQueDEpIC0geChNYXRoLm1heChkLngwLCBzdGF0aXN0aWMpKSkpXG4gICAgLmF0dHIoXCJoZWlnaHRcIiwgZCA9PiBjaGFydEhlaWdodCAtIG1hcmdpbkJvdHRvbSAtIHkoZC5jb3VudCkpXG4gICAgLmF0dHIoXCJmaWxsXCIsIFwicmVkXCIpXG4gICAgLmF0dHIoXCJzdHJva2VcIiwgXCJ3aGl0ZVwiKTtcblxuICBzdmcuYXBwZW5kKFwibGluZVwiKVxuICAgICAgLmF0dHIoXCJ4MVwiLCB4KHN0YXRpc3RpYykpXG4gICAgICAuYXR0cihcIngyXCIsIHgoc3RhdGlzdGljKSlcbiAgICAgIC5hdHRyKFwieTFcIiwgeSgwKSlcbiAgICAgIC5hdHRyKFwieTJcIiwgeShkMy5tYXgoaGlzdG9ncmFtX2RhdGFfcmlnaHRfdGFpbGVkLCBkID0+IGQuY291bnQpKSlcbiAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwicmVkXCIpXG4gICAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLCAyKTtcblxuICAvLyBDYWxjdWxhdGUgYW5kIGRpc3BsYXkgcC12YWx1ZVxuICBjb25zdCBwX3ZhbHVlID0gaGlzdG9ncmFtX2RhdGFfcmlnaHRfdGFpbGVkLmZpbHRlcihkID0+IGQueDAgPj0gc3RhdGlzdGljKVxuICAgIC5yZWR1Y2UoKHN1bSwgZCkgPT4gc3VtICsgZC5jb3VudCwgMCkgLyBkMy5zdW0oaGlzdG9ncmFtX2RhdGFfcmlnaHRfdGFpbGVkLCBkID0+IGQuY291bnQpO1xuXG4gIC8vIE1vdmVkIHAtdmFsdWUgdGV4dCBsZWZ0IGFuZCB1cFxuICBzdmcuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgLmF0dHIoXCJ4XCIsIGNoYXJ0V2lkdGggLSBtYXJnaW5SaWdodCAtIDIwKVxuICAgICAgLmF0dHIoXCJ5XCIsIGNoYXJ0SGVpZ2h0IC8gMylcbiAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwic3RhcnRcIilcbiAgICAgIC50ZXh0KGBwLXZhbHVlOiAke3BfdmFsdWUudG9GaXhlZCgzKX1gKTtcblxuICByZXR1cm4gc3ZnLm5vZGUoKTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBwID0gSW5wdXRzLnJhbmdlKFswLjEsIDAuOV0sIHtcbiAgc3RlcDogMC4wMSxcbiAgdmFsdWU6IDAuNSxcbiAgbGFiZWw6IFwiUG9wdWxhdGlvbiBwcm9wb3J0aW9uXCJcbn0pXG5cblBsb3QucGxvdCh7XG4gIHk6IHtcbiAgICBheGlzOiBudWxsLFxuICAgIGRvbWFpbjogWzAsIDFdXG4gIH0sXG4gIHg6IHtcbiAgICB0aWNrczogWzAsIDFdLFxuICAgIHRpY2tGb3JtYXQ6IGQgPT4gZCxcbiAgICBsYWJlbDogbnVsbFxuICB9LFxuICBtYXJrczogW1xuICAgIFBsb3QuYmFyWShbXG4gICAgICB7IGNhdGVnb3J5OiAwLCBwcm9wb3J0aW9uOiAxIC0gcCB9LFxuICAgICAgeyBjYXRlZ29yeTogMSwgcHJvcG9ydGlvbjogcCB9XG4gICAgXSwge1xuICAgICAgeDogXCJjYXRlZ29yeVwiLFxuICAgICAgeTogXCJwcm9wb3J0aW9uXCIsXG4gICAgICBmaWxsOiBcInN0ZWVsYmx1ZVwiXG4gICAgfSksXG4gICAgUGxvdC50ZXh0KFswLCAxXSwge1xuICAgICAgeDogWzAsIDFdLFxuICAgICAgeTogWy0wLjA1LCAtMC4wNV0sXG4gICAgICB0ZXh0OiBkID0+IGQsXG4gICAgICBkeTogMjAsXG4gICAgICBmb250U2l6ZTogMTZcbiAgICB9KSxcbiAgICBQbG90LnRleHQoW1wiUG9wdWxhdGlvbiBkaXN0cmlidXRpb25cIl0sIHsgLy8gVGl0bGUgYXMgYSB0ZXh0IG1hcmtcbiAgICAgIHg6IFswLjVdLCAgICAgICAgICAvLyBDZW50ZXIgaG9yaXpvbnRhbGx5IChtaWRwb2ludCBvZiAwIGFuZCAxKVxuICAgICAgeTogWy45NV0sICAgICAgICAgLy8gUG9zaXRpb24gYXQgdGhlIHRvcCAoc2xpZ2h0bHkgYWJvdmUgMSlcbiAgICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLCAvLyBNYWtlIGl0IGJvbGRcbiAgICAgIGZvbnRTaXplOiAyMiwgICAgICAgLy8gU2V0IGZvbnQgc2l6ZVxuICAgICAgdGV4dEFuY2hvcjogXCJtaWRkbGVcIiAvLyBDZW50ZXIgdGhlIHRleHQgaG9yaXpvbnRhbGx5XG4gICAgfSlcbiAgXVxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgncDAnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgncGhhdCcpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdzdGF0aXN0aWNfbGVmdF90YWlsJykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3N0YXRpc3RpYycpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdwJykifV19
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../posts/post-with-code copy";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>